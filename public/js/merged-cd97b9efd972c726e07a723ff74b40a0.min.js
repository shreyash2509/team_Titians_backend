/*
 jQuery.floatThead 2.1.1 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2018 Misha Koryak * Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.8.7
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2018 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
 jQuery Placeholder Plugin v2.3.1
 https://github.com/mathiasbynens/jquery-placeholder

 Copyright 2011, 2015 Mathias Bynens
 Released under the MIT license
 typeahead.js 1.2.0
 https://github.com/twitter/typeahead.js
 Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 Datepicker for Bootstrap v1.6.4 (https://github.com/eternicode/bootstrap-datepicker)

 Copyright 2012 Stefan Petre
 Improvements by Andrew Rowls
 Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 Lightbox v2.11.3
 by Lokesh Dhakar

 More info:
 http://lokeshdhakar.com/projects/lightbox2/

 Copyright Lokesh Dhakar
 Released under the MIT license
 https://github.com/lokesh/lightbox2/blob/master/LICENSE

 @preserve
 rangeslider.js - v2.3.2 | (c) 2018 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
'use strict';(function(){var a=function(u,l){return function(){return u.apply(l,arguments)}},d=function(u,l){function k(){this.constructor=u}for(var n in l)q.call(l,n)&&(u[n]=l[n]);k.prototype=l.prototype;u.prototype=new k;u.__super__=l.prototype;return u},q={}.hasOwnProperty;var p=function(){function u(){this.options_index=0;this.parsed=[]}u.prototype.add_node=function(l){return"OPTGROUP"===l.nodeName.toUpperCase()?this.add_group(l):this.add_option(l)};u.prototype.add_group=function(l){var k;var n=
this.parsed.length;this.parsed.push({array_index:n,group:!0,label:l.label,title:l.title?l.title:void 0,children:0,disabled:l.disabled,classes:l.className});var w=l.childNodes;var e=[];var h=0;for(k=w.length;h<k;h++){var g=w[h];e.push(this.add_option(g,n,l.disabled))}return e};u.prototype.add_option=function(l,k,n){if("OPTION"===l.nodeName.toUpperCase())return""!==l.text?(null!=k&&(this.parsed[k].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:l.value,
text:l.text,html:l.innerHTML,title:l.title?l.title:void 0,selected:l.selected,disabled:!0===n?n:l.disabled,group_array_index:k,group_label:null!=k?this.parsed[k].label:null,classes:l.className,style:l.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return u}();p.select_to_array=function(u){var l;var k=new p;var n=u.childNodes;var w=0;for(l=n.length;w<l;w++)u=n[w],k.add_node(u);return k.parsed};var x=function(){function u(l,
k){this.form_field=l;this.options=null!=k?k:{};this.label_click_handler=a(this.label_click_handler,this);u.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}u.prototype.set_default_values=function(){this.click_test_action=function(l){return function(k){return l.test_active_click(k)}}(this);this.activate_action=function(l){return function(k){return l.activate_field(k)}}(this);
this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_highlighted=null;this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className);this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.enable_split_word_search=
null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0;this.group_search=null!=this.options.group_search?this.options.group_search:!0;this.search_contains=this.options.search_contains||!1;this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||!1;this.display_selected_options=
null!=this.options.display_selected_options?this.options.display_selected_options:!0;this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0;this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1;this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY;this.case_sensitive_search=this.options.case_sensitive_search||!1;return this.hide_results_on_select=null!=this.options.hide_results_on_select?
this.options.hide_results_on_select:!0};u.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.default_text=this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||u.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||u.default_single_text;this.default_text=this.escape_html(this.default_text);return this.results_none_found=
this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||u.default_no_result_text};u.prototype.choice_label=function(l){return this.include_group_label_in_selected&&null!=l.group_label?"\x3cb class\x3d'group-name'\x3e"+this.escape_html(l.group_label)+"\x3c/b\x3e"+l.html:l.html};u.prototype.mouse_enter=function(){return this.mouse_on_container=!0};u.prototype.mouse_leave=function(){return this.mouse_on_container=!1};u.prototype.input_focus=function(l){if(this.is_multiple){if(!this.active_field)return setTimeout(function(k){return function(){return k.container_mousedown()}}(this),
50)}else if(!this.active_field)return this.activate_field()};u.prototype.input_blur=function(l){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(k){return function(){return k.blur_test()}}(this),100)};u.prototype.label_click_handler=function(l){return this.is_multiple?this.container_mousedown(l):this.activate_field()};u.prototype.results_option_build=function(l){var k;var n="";var w=0;var e=this.results_data;var h=0;for(k=e.length;h<k;h++){var g=e[h];var f=g.group?this.result_add_group(g):
this.result_add_option(g);""!==f&&(w++,n+=f);null!=l&&l.first&&(g.selected&&this.is_multiple?this.choice_build(g):g.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(g)));if(w>=this.max_shown_results)break}return n};u.prototype.result_add_option=function(l){if(!l.search_match||!this.include_option_in_results(l))return"";var k=[];l.disabled||l.selected&&this.is_multiple||k.push("active-result");!l.disabled||l.selected&&this.is_multiple||k.push("disabled-result");l.selected&&
k.push("result-selected");null!=l.group_array_index&&k.push("group-option");""!==l.classes&&k.push(l.classes);var n=document.createElement("li");n.className=k.join(" ");l.style&&(n.style.cssText=l.style);n.setAttribute("data-option-array-index",l.array_index);n.innerHTML=l.highlighted_html||l.html;l.title&&(n.title=l.title);return this.outerHTML(n)};u.prototype.result_add_group=function(l){if(!l.search_match&&!l.group_match||!(0<l.active_options))return"";var k=[];k.push("group-result");l.classes&&
k.push(l.classes);var n=document.createElement("li");n.className=k.join(" ");n.innerHTML=l.highlighted_html||this.escape_html(l.label);l.title&&(n.title=l.title);return this.outerHTML(n)};u.prototype.results_update_field=function(){this.set_default_text();this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.results_build();if(this.results_showing)return this.winnow_results()};u.prototype.reset_single_select_options=function(){var l;var k=this.results_data;var n=[];var w=
0;for(l=k.length;w<l;w++){var e=k[w];e.selected?n.push(e.selected=!1):n.push(void 0)}return n};u.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};u.prototype.results_search=function(l){return this.results_showing?this.winnow_results():this.results_show()};u.prototype.winnow_results=function(l){var k;this.no_results_clear();var n=0;var w=this.get_search_text();var e=w.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26");var h=this.get_search_regex(e);
var g=this.results_data;e=0;for(k=g.length;e<k;e++){var f=g[e];f.search_match=!1;var b=null;f.highlighted_html="";if(this.include_option_in_results(f)){f.group&&(f.group_match=!1,f.active_options=0);null!=f.group_array_index&&this.results_data[f.group_array_index]&&(b=this.results_data[f.group_array_index],0===b.active_options&&b.search_match&&(n+=1),b.active_options+=1);var c=f.group?f.label:f.text;if(!f.group||this.group_search){var m=this.search_string_match(c,h);f.search_match=null!=m;f.search_match&&
!f.group&&(n+=1);if(f.search_match){if(w.length){var t=m.index;var r=c.slice(0,t);m=c.slice(t,t+w.length);c=c.slice(t+w.length);f.highlighted_html=this.escape_html(r)+"\x3cem\x3e"+this.escape_html(m)+"\x3c/em\x3e"+this.escape_html(c)}null!=b&&(b.group_match=!0)}else null!=f.group_array_index&&this.results_data[f.group_array_index].search_match&&(f.search_match=!0)}}}this.result_clear_highlight();if(1>n&&w.length)return this.update_results_content(""),this.no_results(w);this.update_results_content(this.results_option_build());
if(null==l||!l.skip_highlight)return this.winnow_results_set_highlight()};u.prototype.get_search_regex=function(l){l=this.search_contains?l:"(^|\\s|\\b)"+l+"[^\\s]*";this.enable_split_word_search||this.search_contains||(l="^"+l);return new RegExp(l,this.case_sensitive_search?"":"i")};u.prototype.search_string_match=function(l,k){l=k.exec(l);!this.search_contains&&null!=l&&l[1]&&(l.index+=1);return l};u.prototype.choices_count=function(){var l;if(null!=this.selected_option_count)return this.selected_option_count;
this.selected_option_count=0;var k=this.form_field.options;var n=0;for(l=k.length;n<l;n++){var w=k[n];w.selected&&(this.selected_option_count+=1)}return this.selected_option_count};u.prototype.choices_click=function(l){l.preventDefault();this.activate_field();if(!this.results_showing&&!this.is_disabled)return this.results_show()};u.prototype.keydown_checker=function(l){var k;var n=null!=(k=l.which)?k:l.keyCode;this.search_field_scale();8!==n&&this.pending_backstroke&&this.clear_backstroke();switch(n){case 8:this.backstroke_length=
this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(l);this.mouse_on_container=!1;break;case 13:this.results_showing&&l.preventDefault();break;case 27:this.results_showing&&l.preventDefault();break;case 32:this.disable_search&&l.preventDefault();break;case 38:l.preventDefault();this.keyup_arrow();break;case 40:l.preventDefault(),this.keydown_arrow()}};u.prototype.keyup_checker=function(l){var k;var n=null!=(k=l.which)?k:l.keyCode;this.search_field_scale();
switch(n){case 8:this.is_multiple&&1>this.backstroke_length&&0<this.choices_count()?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:l.preventDefault();this.results_showing&&this.result_select(l);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search()}};u.prototype.clipboard_event_checker=function(l){if(!this.is_disabled)return setTimeout(function(k){return function(){return k.results_search()}}(this),
50)};u.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"};u.prototype.include_option_in_results=function(l){return this.is_multiple&&!this.display_selected_options&&l.selected||!this.display_disabled_options&&l.disabled||l.empty?!1:!0};u.prototype.search_results_touchstart=function(l){this.touch_started=!0;return this.search_results_mouseover(l)};u.prototype.search_results_touchmove=function(l){this.touch_started=!1;return this.search_results_mouseout(l)};
u.prototype.search_results_touchend=function(l){if(this.touch_started)return this.search_results_mouseup(l)};u.prototype.outerHTML=function(l){if(l.outerHTML)return l.outerHTML;var k=document.createElement("div");k.appendChild(l);return k.innerHTML};u.prototype.get_single_html=function(){return'\x3ca class\x3d"chosen-single chosen-default"\x3e\n  \x3cspan\x3e'+this.default_text+'\x3c/span\x3e\n  \x3cdiv\x3e\x3cb\x3e\x3c/b\x3e\x3c/div\x3e\n\x3c/a\x3e\n\x3cdiv class\x3d"chosen-drop"\x3e\n  \x3cdiv class\x3d"chosen-search"\x3e\n    \x3cinput class\x3d"chosen-search-input" type\x3d"text" autocomplete\x3d"off" /\x3e\n  \x3c/div\x3e\n  \x3cul class\x3d"chosen-results"\x3e\x3c/ul\x3e\n\x3c/div\x3e'};
u.prototype.get_multi_html=function(){return'\x3cul class\x3d"chosen-choices"\x3e\n  \x3cli class\x3d"search-field"\x3e\n    \x3cinput class\x3d"chosen-search-input" type\x3d"text" autocomplete\x3d"off" value\x3d"'+this.default_text+'" /\x3e\n  \x3c/li\x3e\n\x3c/ul\x3e\n\x3cdiv class\x3d"chosen-drop"\x3e\n  \x3cul class\x3d"chosen-results"\x3e\x3c/ul\x3e\n\x3c/div\x3e'};u.prototype.get_no_results_html=function(l){return'\x3cli class\x3d"no-results"\x3e\n  '+this.results_none_found+" \x3cspan\x3e"+
this.escape_html(l)+"\x3c/span\x3e\n\x3c/li\x3e"};u.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?8<=document.documentMode:/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent)?!1:!0};u.default_multiple_text="Select Some Options";
u.default_single_text="Select an Option";u.default_no_result_text="No results match";return u}();var v=jQuery;v.fn.extend({chosen:function(u){return x.browser_is_supported()?this.each(function(l){l=v(this);var k=l.data("chosen");"destroy"===u?k instanceof y&&k.destroy():k instanceof y||l.data("chosen",new y(this,u))}):this}});var y=function(u){function l(){return l.__super__.constructor.apply(this,arguments)}d(l,u);l.prototype.setup=function(){this.form_field_jq=v(this.form_field);return this.current_selectedIndex=
this.form_field.selectedIndex};l.prototype.set_up_html=function(){var k=["chosen-container"];k.push("chosen-container-"+(this.is_multiple?"multi":"single"));this.inherit_select_classes&&this.form_field.className&&k.push(this.form_field.className);this.is_rtl&&k.push("chosen-rtl");k={"class":k.join(" "),title:this.form_field.title};this.form_field.id.length&&(k.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen");this.container=v("\x3cdiv /\x3e",k);this.container.width(this.container_width());this.is_multiple?
this.container.html(this.get_multi_html()):this.container.html(this.get_single_html());this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chosen-drop").first();this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chosen-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),
this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first());this.results_build();this.set_tab_index();return this.set_label_behavior()};l.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})};l.prototype.register_observers=function(){this.container.on("touchstart.chosen",function(k){return function(n){k.container_mousedown(n)}}(this));
this.container.on("touchend.chosen",function(k){return function(n){k.container_mouseup(n)}}(this));this.container.on("mousedown.chosen",function(k){return function(n){k.container_mousedown(n)}}(this));this.container.on("mouseup.chosen",function(k){return function(n){k.container_mouseup(n)}}(this));this.container.on("mouseenter.chosen",function(k){return function(n){k.mouse_enter(n)}}(this));this.container.on("mouseleave.chosen",function(k){return function(n){k.mouse_leave(n)}}(this));this.search_results.on("mouseup.chosen",
function(k){return function(n){k.search_results_mouseup(n)}}(this));this.search_results.on("mouseover.chosen",function(k){return function(n){k.search_results_mouseover(n)}}(this));this.search_results.on("mouseout.chosen",function(k){return function(n){k.search_results_mouseout(n)}}(this));this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",function(k){return function(n){k.search_results_mousewheel(n)}}(this));this.search_results.on("touchstart.chosen",function(k){return function(n){k.search_results_touchstart(n)}}(this));
this.search_results.on("touchmove.chosen",function(k){return function(n){k.search_results_touchmove(n)}}(this));this.search_results.on("touchend.chosen",function(k){return function(n){k.search_results_touchend(n)}}(this));this.form_field_jq.on("chosen:updated.chosen",function(k){return function(n){k.results_update_field(n)}}(this));this.form_field_jq.on("chosen:activate.chosen",function(k){return function(n){k.activate_field(n)}}(this));this.form_field_jq.on("chosen:open.chosen",function(k){return function(n){k.container_mousedown(n)}}(this));
this.form_field_jq.on("chosen:close.chosen",function(k){return function(n){k.close_field(n)}}(this));this.search_field.on("blur.chosen",function(k){return function(n){k.input_blur(n)}}(this));this.search_field.on("keyup.chosen",function(k){return function(n){k.keyup_checker(n)}}(this));this.search_field.on("keydown.chosen",function(k){return function(n){k.keydown_checker(n)}}(this));this.search_field.on("focus.chosen",function(k){return function(n){k.input_focus(n)}}(this));this.search_field.on("cut.chosen",
function(k){return function(n){k.clipboard_event_checker(n)}}(this));this.search_field.on("paste.chosen",function(k){return function(n){k.clipboard_event_checker(n)}}(this));return this.is_multiple?this.search_choices.on("click.chosen",function(k){return function(n){k.choices_click(n)}}(this)):this.container.on("click.chosen",function(k){k.preventDefault()})};l.prototype.destroy=function(){v(this.container[0].ownerDocument).off("click.chosen",this.click_test_action);0<this.form_field_label.length&&
this.form_field_label.off("click.chosen");this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex);this.container.remove();this.form_field_jq.removeData("chosen");return this.form_field_jq.show()};l.prototype.search_field_disabled=function(){this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled");this.container.toggleClass("chosen-disabled",this.is_disabled);this.search_field[0].disabled=this.is_disabled;this.is_multiple||
this.selected_item.off("focus.chosen",this.activate_field);if(this.is_disabled)return this.close_field();if(!this.is_multiple)return this.selected_item.on("focus.chosen",this.activate_field)};l.prototype.container_mousedown=function(k){var n;if(!this.is_disabled&&(!k||"mousedown"!==(n=k.type)&&"touchstart"!==n||this.results_showing||k.preventDefault(),null==k||!v(k.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!k||v(k.target)[0]!==this.selected_item[0]&&!v(k.target).parents("a.chosen-single").length||
(k.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),v(this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field()};l.prototype.container_mouseup=function(k){if("ABBR"===k.target.nodeName&&!this.is_disabled)return this.results_reset(k)};l.prototype.search_results_mousewheel=function(k){var n;k.originalEvent&&(n=k.originalEvent.deltaY||-k.originalEvent.wheelDelta||k.originalEvent.detail);if(null!=n)return k.preventDefault(),
"DOMMouseScroll"===k.type&&(n*=40),this.search_results.scrollTop(n+this.search_results.scrollTop())};l.prototype.blur_test=function(k){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()};l.prototype.close_field=function(){v(this.container[0].ownerDocument).off("click.chosen",this.click_test_action);this.active_field=!1;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();
this.search_field_scale();return this.search_field.blur()};l.prototype.activate_field=function(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()};l.prototype.test_active_click=function(k){k=v(k.target).closest(".chosen-container");return k.length&&this.container[0]===k[0]?this.active_field=!0:this.close_field()};l.prototype.results_build=function(){this.parsing=!0;this.selected_option_count=
null;this.results_data=p.select_to_array(this.form_field);this.is_multiple?this.search_choices.find("li.search-choice").remove():(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch")));this.update_results_content(this.results_option_build({first:!0}));
this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=!1};l.prototype.result_do_highlight=function(k){if(k.length){this.result_clear_highlight();this.result_highlight=k;this.result_highlight.addClass("highlighted");var n=parseInt(this.search_results.css("maxHeight"),10);var w=this.search_results.scrollTop();var e=n+w;var h=this.result_highlight.position().top+this.search_results.scrollTop();k=h+this.result_highlight.outerHeight();if(k>=e)return this.search_results.scrollTop(0<
k-n?k-n:0);if(h<w)return this.search_results.scrollTop(h)}};l.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};l.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;this.container.addClass("chosen-with-drop");this.results_showing=!0;this.search_field.focus();this.search_field.val(this.get_search_field_value());
this.winnow_results();return this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this})};l.prototype.update_results_content=function(k){return this.search_results.html(k)};l.prototype.results_hide=function(){this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this}));return this.results_showing=!1};l.prototype.set_tab_index=function(k){if(this.form_field.tabIndex)return k=this.form_field.tabIndex,
this.form_field.tabIndex=-1,this.search_field[0].tabIndex=k};l.prototype.set_label_behavior=function(){this.form_field_label=this.form_field_jq.parents("label");!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=v("label[for\x3d'"+this.form_field.id+"']"));if(0<this.form_field_label.length)return this.form_field_label.on("click.chosen",this.label_click_handler)};l.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices_count()&&!this.active_field)return this.search_field.val(this.default_text),
this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};l.prototype.search_results_mouseup=function(k){var n=v(k.target).hasClass("active-result")?v(k.target):v(k.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select(k),this.search_field.focus()};l.prototype.search_results_mouseover=function(k){if(k=v(k.target).hasClass("active-result")?v(k.target):v(k.target).parents(".active-result").first())return this.result_do_highlight(k)};
l.prototype.search_results_mouseout=function(k){if(v(k.target).hasClass("active-result")||v(k.target).parents(".active-result").first())return this.result_clear_highlight()};l.prototype.choice_build=function(k){var n=v("\x3cli /\x3e",{"class":"search-choice"}).html("\x3cspan\x3e"+this.choice_label(k)+"\x3c/span\x3e");k.disabled?n.addClass("search-choice-disabled"):(k=v("\x3ca /\x3e",{"class":"search-choice-close","data-option-array-index":k.array_index}),k.on("click.chosen",function(w){return function(e){return w.choice_destroy_link_click(e)}}(this)),
n.append(k));return this.search_container.before(n)};l.prototype.choice_destroy_link_click=function(k){k.preventDefault();k.stopPropagation();if(!this.is_disabled)return this.choice_destroy(v(k.target))};l.prototype.choice_destroy=function(k){if(this.result_deselect(k[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.focus():this.show_search_field_default(),this.is_multiple&&0<this.choices_count()&&1>this.get_search_field_value().length&&this.results_hide(),k.parents("li").first().remove(),
this.search_field_scale()};l.prototype.results_reset=function(){this.reset_single_select_options();this.form_field.options[0].selected=!0;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.trigger_form_field_change();if(this.active_field)return this.results_hide()};l.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};l.prototype.result_select=function(k){if(this.result_highlight){var n=
this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;this.is_multiple?n.removeClass("active-result"):this.reset_single_select_options();n.addClass("result-selected");n=this.results_data[n[0].getAttribute("data-option-array-index")];n.selected=!0;this.form_field.options[n.options_index].selected=!0;this.selected_option_count=null;this.is_multiple?this.choice_build(n):
this.single_set_selected_text(this.choice_label(n));this.is_multiple&&(!this.hide_results_on_select||k.metaKey||k.ctrlKey)?k.metaKey||k.ctrlKey?this.winnow_results({skip_highlight:!0}):(this.search_field.val(""),this.winnow_results()):(this.results_hide(),this.show_search_field_default());(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[n.options_index].value});this.current_selectedIndex=this.form_field.selectedIndex;
k.preventDefault();return this.search_field_scale()}};l.prototype.single_set_selected_text=function(k){null==k&&(k=this.default_text);k===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default"));return this.selected_item.find("span").html(k)};l.prototype.result_deselect=function(k){k=this.results_data[k];if(this.form_field.options[k.options_index].disabled)return!1;k.selected=!1;this.form_field.options[k.options_index].selected=
!1;this.selected_option_count=null;this.result_clear_highlight();this.results_showing&&this.winnow_results();this.trigger_form_field_change({deselected:this.form_field.options[k.options_index].value});this.search_field_scale();return!0};l.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('\x3cabbr class\x3d"search-choice-close"\x3e\x3c/abbr\x3e'),this.selected_item.addClass("chosen-single-with-deselect")};
l.prototype.get_search_field_value=function(){return this.search_field.val()};l.prototype.get_search_text=function(){return v.trim(this.get_search_field_value())};l.prototype.escape_html=function(k){return v("\x3cdiv/\x3e").text(k).html()};l.prototype.winnow_results_set_highlight=function(){var k=this.is_multiple?[]:this.search_results.find(".result-selected.active-result");k=k.length?k.first():this.search_results.find(".active-result").first();if(null!=k)return this.result_do_highlight(k)};l.prototype.no_results=
function(k){k=this.get_no_results_html(k);this.search_results.append(k);return this.form_field_jq.trigger("chosen:no_results",{chosen:this})};l.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};l.prototype.keydown_arrow=function(){var k;if(this.results_showing&&this.result_highlight){if(k=this.result_highlight.nextAll("li.active-result").first())return this.result_do_highlight(k)}else return this.results_show()};l.prototype.keyup_arrow=function(){if(!this.results_showing&&
!this.is_multiple)return this.results_show();if(this.result_highlight){var k=this.result_highlight.prevAll("li.active-result");if(k.length)return this.result_do_highlight(k.first());0<this.choices_count()&&this.results_hide();return this.result_clear_highlight()}};l.prototype.keydown_backstroke=function(){if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();var k=this.search_container.siblings("li.search-choice").last();if(k.length&&
!k.hasClass("search-choice-disabled"))return this.pending_backstroke=k,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};l.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};l.prototype.search_field_scale=function(){var k;if(this.is_multiple){var n={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"};
var w="fontSize fontStyle fontWeight fontFamily lineHeight textTransform letterSpacing".split(" ");var e=0;for(k=w.length;e<k;e++){var h=w[e];n[h]=this.search_field.css(h)}e=v("\x3cdiv /\x3e").css(n);e.text(this.get_search_field_value());v("body").append(e);k=e.width()+25;e.remove();this.container.is(":visible")&&(k=Math.min(this.container.outerWidth()-10,k));return this.search_field.width(k)}};l.prototype.trigger_form_field_change=function(k){this.form_field_jq.trigger("input",k);return this.form_field_jq.trigger("change",
k)};return l}(x)}).call(this);
(function(a,d,q){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports&&"undefined"===typeof Meteor?module.exports=a(require("jquery")):a(d||q)})(function(a){var d=function(v,y,u){var l={invalid:[],getCaret:function(){try{var e=0,h=v.get(0),g=document.selection,f=h.selectionStart;if(g&&-1===navigator.appVersion.indexOf("MSIE 10")){var b=g.createRange();b.moveStart("character",-l.val().length);e=b.text.length}else if(f||"0"===f)e=f;return e}catch(c){}},setCaret:function(e){try{if(v.is(":focus")){var h=
v.get(0);if(h.setSelectionRange)h.setSelectionRange(e,e);else{var g=h.createTextRange();g.collapse(!0);g.moveEnd("character",e);g.moveStart("character",e);g.select()}}}catch(f){}},events:function(){v.on("keydown.mask",function(e){v.data("mask-keycode",e.keyCode||e.which);v.data("mask-previus-value",v.val());v.data("mask-previus-caret-pos",l.getCaret());l.maskDigitPosMapOld=l.maskDigitPosMap}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",l.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){v.keydown().keyup()},
100)}).on("change.mask",function(){v.data("changed",!0)}).on("blur.mask",function(){n===l.val()||v.data("changed")||v.trigger("change");v.data("changed",!1)}).on("blur.mask",function(){n=l.val()}).on("focus.mask",function(e){!0===u.selectOnFocus&&a(e.target).select()}).on("focusout.mask",function(){u.clearIfNotMatch&&!w.test(l.val())&&l.val("")})},getRegexMask:function(){for(var e=[],h,g,f,b,c=0;c<y.length;c++)(h=k.translation[y.charAt(c)])?(g=h.pattern.toString().replace(/.{1}$|^.{1}/g,""),f=h.optional,
(h=h.recursive)?(e.push(y.charAt(c)),b={digit:y.charAt(c),pattern:g}):e.push(f||h?g+"?":g)):e.push(y.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"));e=e.join("");b&&(e=e.replace(new RegExp("("+b.digit+"(.*"+b.digit+")?)"),"($1)?").replace(new RegExp(b.digit,"g"),b.pattern));return new RegExp(e)},destroyEvents:function(){v.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(e){var h=v.is("input")?"val":"text";if(0<arguments.length){if(v[h]()!==e)v[h](e);
h=v}else h=v[h]();return h},calculateCaretPosition:function(e){var h=l.getMasked(),g=l.getCaret();if(e!==h){var f=v.data("mask-previus-caret-pos")||0;h=h.length;var b=e.length,c=e=0,m=0,t=0,r;for(r=g;r<h&&l.maskDigitPosMap[r];r++)c++;for(r=g-1;0<=r&&l.maskDigitPosMap[r];r--)e++;for(r=g-1;0<=r;r--)l.maskDigitPosMap[r]&&m++;for(r=f-1;0<=r;r--)l.maskDigitPosMapOld[r]&&t++;g>b?g=10*h:f>=g&&f!==b?l.maskDigitPosMapOld[g]||(f=g,g=g-(t-m)-e,l.maskDigitPosMap[g]&&(g=f)):g>f&&(g=g+(m-t)+c)}return g},behaviour:function(e){e=
e||window.event;l.invalid=[];var h=v.data("mask-keycode");if(-1===a.inArray(h,k.byPassKeys)){h=l.getMasked();var g=l.getCaret(),f=v.data("mask-previus-value")||"";setTimeout(function(){l.setCaret(l.calculateCaretPosition(f))},a.jMaskGlobals.keyStrokeCompensation);l.val(h);l.setCaret(g);return l.callbacks(e)}},getMasked:function(e,h){var g=[],f=void 0===h?l.val():h+"",b=0,c=y.length,m=0,t=f.length,r=1,z="push",A=-1,C=0;h=[];if(u.reverse){z="unshift";r=-1;var B=0;b=c-1;m=t-1;var H=function(){return-1<
b&&-1<m}}else B=c-1,H=function(){return b<c&&m<t};for(var D;H();){var K=y.charAt(b),L=f.charAt(m),N=k.translation[K];if(N)L.match(N.pattern)?(g[z](L),N.recursive&&(-1===A?A=b:b===B&&b!==A&&(b=A-r),B===A&&(b-=r)),b+=r):L===D?(C--,D=void 0):N.optional?(b+=r,m-=r):N.fallback?(g[z](N.fallback),b+=r,m-=r):l.invalid.push({p:m,v:L,e:N.pattern}),m+=r;else{if(!e)g[z](K);L===K?(h.push(m),m+=r):(D=K,h.push(m+C),C++);b+=r}}e=y.charAt(B);c!==t+1||k.translation[e]||g.push(e);g=g.join("");l.mapMaskdigitPositions(g,
h,t);return g},mapMaskdigitPositions:function(e,h,g){e=u.reverse?e.length-g:0;l.maskDigitPosMap={};for(g=0;g<h.length;g++)l.maskDigitPosMap[h[g]+e]=1},callbacks:function(e){var h=l.val(),g=h!==n,f=[h,e,v,u],b=function(c,m,t){"function"===typeof u[c]&&m&&u[c].apply(this,t)};b("onChange",!0===g,f);b("onKeyPress",!0===g,f);b("onComplete",h.length===y.length,f);b("onInvalid",0<l.invalid.length,[h,e,v,l.invalid,u])}};v=a(v);var k=this,n=l.val(),w;y="function"===typeof y?y(l.val(),void 0,v,u):y;k.mask=
y;k.options=u;k.remove=function(){var e=l.getCaret();k.options.placeholder&&v.removeAttr("placeholder");v.data("mask-maxlength")&&v.removeAttr("maxlength");l.destroyEvents();l.val(k.getCleanVal());l.setCaret(e);return v};k.getCleanVal=function(){return l.getMasked(!0)};k.getMaskedVal=function(e){return l.getMasked(!1,e)};k.init=function(e){e=e||!1;u=u||{};k.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch;k.byPassKeys=a.jMaskGlobals.byPassKeys;k.translation=a.extend({},a.jMaskGlobals.translation,u.translation);
k=a.extend(!0,{},k,u);w=l.getRegexMask();if(e)l.events(),l.val(l.getMasked());else{u.placeholder&&v.attr("placeholder",u.placeholder);v.data("mask")&&v.attr("autocomplete","off");e=0;for(var h=!0;e<y.length;e++){var g=k.translation[y.charAt(e)];if(g&&g.recursive){h=!1;break}}h&&v.attr("maxlength",y.length).data("mask-maxlength",!0);l.destroyEvents();l.events();e=l.getCaret();l.val(l.getMasked());l.setCaret(e)}};k.init(!v.is("input"))};a.maskWatchers={};var q=function(){var v=a(this),y={},u=v.attr("data-mask");
v.attr("data-mask-reverse")&&(y.reverse=!0);v.attr("data-mask-clearifnotmatch")&&(y.clearIfNotMatch=!0);"true"===v.attr("data-mask-selectonfocus")&&(y.selectOnFocus=!0);if(p(v,u,y))return v.data("mask",new d(this,u,y))},p=function(v,y,u){u=u||{};var l=a(v).data("mask"),k=JSON.stringify;v=a(v).val()||a(v).text();try{return"function"===typeof y&&(y=y(v)),"object"!==typeof l||k(l.options)!==k(u)||l.mask!==y}catch(n){}},x=function(v){var y=document.createElement("div");v="on"+v;var u=v in y;u||(y.setAttribute(v,
"return;"),u="function"===typeof y[v]);return u};a.fn.mask=function(v,y){y=y||{};var u=this.selector,l=a.jMaskGlobals,k=l.watchInterval;l=y.watchInputs||l.watchInputs;var n=function(){if(p(this,v,y))return a(this).data("mask",new d(this,v,y))};a(this).each(n);u&&""!==u&&l&&(clearInterval(a.maskWatchers[u]),a.maskWatchers[u]=setInterval(function(){a(document).find(u).each(n)},k));return this};a.fn.masked=function(v){return this.data("mask").getMaskedVal(v)};a.fn.unmask=function(){clearInterval(a.maskWatchers[this.selector]);
delete a.maskWatchers[this.selector];return this.each(function(){var v=a(this).data("mask");v&&v.remove().removeData("mask")})};a.fn.cleanVal=function(){return this.data("mask").getCleanVal()};a.applyDataMask=function(v){v=v||a.jMaskGlobals.maskElements;(v instanceof a?v:a(v)).filter(a.jMaskGlobals.dataMaskAttr).each(q)};x={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&
x("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};a.jMaskGlobals=a.jMaskGlobals||{};x=a.jMaskGlobals=a.extend(!0,{},x,a.jMaskGlobals);x.dataMask&&a.applyDataMask();setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},x.watchInterval)},window.jQuery,window.Zepto);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof module&&module.exports?a(require("jquery")):a(jQuery)})(function(a){function d(w){var e={},h=/^jQuery\d+$/;a.each(w.attributes,function(g,f){f.specified&&!h.test(f.name)&&(e[f.name]=f.value)});return e}function q(w,e){var h=a(this);if(this.value===h.attr("placeholder")&&h.hasClass(k.customClass))if(this.value="",h.removeClass(k.customClass),h.data("placeholder-password")){h=h.hide().nextAll('input[type\x3d"password"]:first').show().attr("id",
h.removeAttr("id").data("placeholder-id"));if(!0===w)return h[0].value=e;h.focus()}else this==x()&&this.select()}function p(w){var e=a(this),h=this.id;if(!w||"blur"!==w.type||!e.hasClass(k.customClass))if(""===this.value){if("password"===this.type){if(!e.data("placeholder-textinput")){try{var g=e.clone().prop({type:"text"})}catch(f){g=a("\x3cinput\x3e").attr(a.extend(d(this),{type:"text"}))}g.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":e,"placeholder-id":h}).bind("focus.placeholder",
q);e.data({"placeholder-textinput":g,"placeholder-id":h}).before(g)}this.value="";e=e.removeAttr("id").hide().prevAll('input[type\x3d"text"]:first').attr("id",e.data("placeholder-id")).show()}else if(w=e.data("placeholder-password"))w[0].value="",e.attr("id",e.data("placeholder-id")).show().nextAll('input[type\x3d"password"]:last').hide().removeAttr("id");e.addClass(k.customClass);e[0].value=e.attr("placeholder")}else e.removeClass(k.customClass)}function x(){try{return document.activeElement}catch(w){}}
var v="[object OperaMini]"===Object.prototype.toString.call(window.operamini),y="placeholder"in document.createElement("input")&&!v&&!0;v="placeholder"in document.createElement("textarea")&&!v&&!0;var u=a.valHooks,l=a.propHooks,k={};if(y&&v){var n=a.fn.placeholder=function(){return this};n.input=!0;n.textarea=!0}else n=a.fn.placeholder=function(w){k=a.extend({},{customClass:"placeholder"},w);return this.filter((y?"textarea":":input")+"[placeholder]").not("."+k.customClass).not(":radio, :checkbox, [type\x3dhidden]").bind({"focus.placeholder":q,
"blur.placeholder":p}).data("placeholder-enabled",!0).trigger("blur.placeholder")},n.input=y,n.textarea=v,n={get:function(w){var e=a(w),h=e.data("placeholder-password");return h?h[0].value:e.data("placeholder-enabled")&&e.hasClass(k.customClass)?"":w.value},set:function(w,e){var h=a(w);if(""!==e){var g=h.data("placeholder-textinput");var f=h.data("placeholder-password");g?(q.call(g[0],!0,e)||(w.value=e),g[0].value=e):f&&(q.call(w,!0,e)||(f[0].value=e),w.value=e)}if(!h.data("placeholder-enabled"))return w.value=
e,h;""===e?(w.value=e,w!=x()&&p.call(w)):(h.hasClass(k.customClass)&&q.call(w),w.value=e);return h}},y||(u.input=n,l.value=n),v||(u.textarea=n,l.value=n),a(function(){a(document).delegate("form","submit.placeholder",function(){var w=a("."+k.customClass,this).each(function(){q.call(this,!0,"")});setTimeout(function(){w.each(p)},10)})}),a(window).bind("beforeunload.placeholder",function(){var w=!0;try{"javascript:void(0)"===document.activeElement.toString()&&(w=!1)}catch(e){}w&&a("."+k.customClass).each(function(){this.value=
""})})});
(function(a){function d(t,r){if(8==n){var z=f.width(),A=l.debounce(function(){var C=f.width();z!=C&&(z=C,r())},1);f.on(t,A)}else f.on(t,l.debounce(r,1))}function q(t){t=t[0].parentElement;do if("visible"!=window.getComputedStyle(t).getPropertyValue("overflow"))break;while(t=t.parentElement);return t==document.body?a([]):a(t)}function p(t){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+t)}function x(t){t=t.getBoundingClientRect();return t.width||t.right-t.left}
function v(){var t=document.createElement("scrolltester");t.style.cssText="width:100px;height:100px;overflow:scroll!important;position:absolute;top:-9999px;display:block";document.body.appendChild(t);var r=t.offsetWidth-t.clientWidth;document.body.removeChild(t);return r}function y(t){if(t.dataTableSettings)for(var r=0;r<t.dataTableSettings.length;r++)if(t[0]==t.dataTableSettings[r].nTable)return!0;return!1}function u(t,r,z){var A=z?"outerWidth":"width";if(h&&t.css("max-width")){A=0;z&&(A+=parseInt(t.css("borderLeft"),
10),A+=parseInt(t.css("borderRight"),10));for(t=0;t<r.length;t++)A+=x(r.get(t));return A}return t[A]()}a.floatThead=a.floatThead||{};a.floatThead.defaults={headerCellSelector:"tr:visible:first\x3e*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(t){return a([])},responsiveContainer:function(t){return a([])},getSizingRow:function(t,r,z){return t.find("tbody tr:visible:first\x3e*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",
copyTableClass:!0,autoReflow:!1,debug:!1,support:{bootstrap:!0,datatables:!0,jqueryUI:!0,perfectScrollbar:!0},floatContainerCss:{"overflow-x":"hidden"}};var l=function(){var t={},r=Object.prototype.hasOwnProperty;t.has=function(A,C){return r.call(A,C)};t.keys=Object.keys||function(A){if(A!==Object(A))throw new TypeError("Invalid object");var C=[],B;for(B in A)t.has(A,B)&&C.push(B);return C};var z=0;t.uniqueId=function(A){var C=++z+"";return A?A+C:C};a.each("Arguments Function String Number Date RegExp".split(" "),
function(){var A=this;t["is"+A]=function(C){return Object.prototype.toString.call(C)=="[object "+A+"]"}});t.debounce=function(A,C,B){var H,D,K,L,N;return function(){K=this;D=arguments;L=new Date;var G=function(){var Z=new Date-L;Z<C?H=setTimeout(G,C-Z):(H=null,B||(N=A.apply(K,D)))},M=B&&!H;H||(H=setTimeout(G,C));M&&(N=A.apply(K,D));return N}};return t}(),k="undefined"!==typeof MutationObserver,n=function(){for(var t=3,r=document.createElement("b"),z=r.all||[];t=1+t,r.innerHTML="\x3c!--[if gt IE "+
t+"]\x3e\x3ci\x3e\x3c![endif]--\x3e",z[0];);return 4<t?t:document.documentMode}(),w=/Gecko\//.test(navigator.userAgent),e=/WebKit\//.test(navigator.userAgent);n||w||e||(n=11);var h=function(){if(e){var t=a("\x3cdiv\x3e").css("width",0).append(a("\x3ctable\x3e").css("max-width","100%").append(a("\x3ctr\x3e").append(a("\x3cth\x3e").append(a("\x3cdiv\x3e").css("min-width",100).text("X")))));a("body").append(t);var r=0==t.find("table").width();t.remove();return r}return!1},g=!w&&!n,f=a(window),b=w&&window.matchMedia;
if(!window.matchMedia||b){var c=window.onbeforeprint,m=window.onafterprint;window.onbeforeprint=function(){c&&c();f.triggerHandler("beforeprint")};window.onafterprint=function(){m&&m();f.triggerHandler("afterprint")}}a.fn.floatThead=function(t){t=t||{};if(8>n)return this;var r=null;l.isFunction(h)&&(h=h());if(l.isString(t)){var z=t,A=Array.prototype.slice.call(arguments,1),C=this;this.filter("table").each(function(){var D=a(this),K=D.data("floatThead-lazy");K&&D.floatThead(K);(D=D.data("floatThead-attached"))&&
l.isFunction(D[z])&&(D=D[z].apply(this,A),void 0!==D&&(C=D))});return C}var B=a.extend({},a.floatThead.defaults||{},t);a.each(t,function(D,K){D in a.floatThead.defaults||!B.debug||p("Used ["+D+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+l.keys(a.floatThead.defaults).join(", "))});if(B.debug){var H=a.fn.jquery.split(".");1==parseInt(H[0],10)&&7>=parseInt(H[1],10)&&p("jQuery version "+a.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -\x3e http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}this.filter(":not(."+
B.floatTableClass+")").each(function(){function D(E){return E+".fth-"+Qa+".floatTHead"}function K(){var E=0;ea.children("tr:visible").each(function(){E+=a(this).outerHeight(!0)});if("collapse"==F.css("border-collapse")){var I=parseInt(F.css("border-top-width"),10),O=parseInt(F.find("thead tr:first").find("\x3e*:first").css("border-top-width"),10);I>O&&(E-=I/2)}ta.outerHeight(E);Ra.outerHeight(E)}function L(){ia=(l.isFunction(B.top)?B.top(F):B.top)||0;Sa=(l.isFunction(B.bottom)?B.bottom(F):B.bottom)||
0}function N(){var E=ea.find(B.headerCellSelector);if(ua)var I=fa.find("col").length;else I=0,E.each(function(){I+=parseInt(a(this).attr("colspan")||1,10)});if(I!==Ta){Ta=I;for(var O=[],J=[],T=[],Q,U=0;U<I;U++)Q=E.eq(U).text(),O.push('\x3cth class\x3d"floatThead-col" aria-label\x3d"'+Q+'"/\x3e'),J.push("\x3ccol/\x3e"),T.push(a("\x3cfthtd\x3e").css({display:"table-cell",height:0,width:"auto"}));J=J.join("");O=O.join("");g&&(va.empty(),va.append(T),ja=va.find("fthtd"));ta.html(O);Ra=ta.find("th");ua||
fa.html(J);na=fa.find("col");Ga.html(J);Ua=Ga.find("col")}return I}function G(){if(!oa){oa=!0;if(R){var E=u(F,ja,!0),I=wa.width();E>I&&F.css("minWidth",E)}F.css(Va);V.css(Va);V.append(ea);Wa.before(pa);K()}}function M(){oa&&(oa=!1,R&&F.width(eb),pa.detach(),F.prepend(ea),F.css(qa),V.css(qa),F.css("minWidth",Xa),F.css("minWidth",u(F,ja)))}function Z(E){Ya!=E&&(Ya=E,F.triggerHandler("floatThead",[E,S]))}function Za(E){R!=E&&(R=E,S.css({position:R?"absolute":"fixed"}))}function Ha(){var E,I=N();return function(){var O=
S.scrollLeft();na=fa.find("col");var J=na;J=g?ja:n?B.getSizingRow(F,J,ja):J;if(J.length==I&&0<I){if(!ua)for(E=0;E<I;E++)na.eq(E).css("width","");M();var T=[];for(E=0;E<I;E++)T[E]=x(J.get(E));for(E=0;E<I;E++)Ua.eq(E).width(T[E]),na.eq(E).width(T[E]);G()}else V.append(ea),F.css(qa),V.css(qa),K();S.scrollLeft(O);F.triggerHandler("reflowed",[S])}}function $a(E){E=P.css("border-"+E+"-width");var I=0;E&&~E.indexOf("px")&&(I=parseInt(E,10));return I}function xa(){return"auto"==ca.css("overflow-x")}function Ia(){var E=
P.scrollTop(),I=0,O=ya?za.outerHeight(!0):0,J=Aa?O:-O,T=S.height(),Q=F.offset(),U=0,Ba=0;if(W){var fb=P.offset();I=Q.top-fb.top+E;ya&&Aa&&(I+=O);U=$a("left");Ba=$a("top");I-=Ba}else var Ja=Q.top-ia-T+Sa+ka.horizontal;var aa=f.scrollTop(),ra=f.scrollLeft(),ma=(xa()?ca:P).scrollLeft()||0;return function(ba){Ca=xa();var ab=0>=F[0].offsetWidth&&0>=F[0].offsetHeight;if(!ab&&Da)return Da=!1,setTimeout(function(){F.triggerHandler("reflow")},1),null;if(ab&&(Da=!0,!R))return null;if("windowScroll"==ba)aa=
f.scrollTop(),ra=f.scrollLeft();else if("containerScroll"==ba)if(ca.length){if(!Ca)return;ma=ca.scrollLeft()}else E=P.scrollTop(),ma=P.scrollLeft();else"init"!=ba&&(aa=f.scrollTop(),ra=f.scrollLeft(),E=P.scrollTop(),ma=(xa()?ca:P).scrollLeft()||0);if(!e||!(0>aa||0>ra)){if(bb)"windowScrollDone"==ba?Za(!0):Za(!1);else if("windowScrollDone"==ba)return null;Q=F.offset();ya&&Aa&&(Q.top+=O);ba=F.outerHeight();if(W&&R){if(I>=E){var X=I-E+Ba;X=0<X?X:0;Z(!1)}else X=Ka?Ba:E,Z(!0);var Ea=U}else!W&&R?(aa>Ja+
ba+J?X=ba-T+J:Q.top>=aa+ia?(X=0,M(),Z(!1)):(X=ia+aa-Q.top+I+(Aa?O:0),G(),Z(!0)),Ea=ma):W&&!R?(I>E||E-I>ba?(X=Q.top-aa,M(),Z(!1)):(X=Q.top+E-aa-I,G(),Z(!0)),Ea=Q.left+ma-ra):W||R||(aa>Ja+ba+J?X=ba+ia-aa+Ja+J:Q.top>aa+ia?(X=Q.top-aa,G(),Z(!1)):(X=ia,Z(!0)),Ea=Q.left+ma-ra);return{top:Math.round(X),left:Math.round(Ea)}}}}function cb(){var E=null,I=null,O=null;return function(J,T,Q){if(null!=J&&(E!=J.top||I!=J.left)){if(8===n)S.css({top:J.top,left:J.left});else{var U="translateX("+J.left+"px) translateY("+
J.top+"px)";S.css({"-webkit-transform":U,"-moz-transform":U,"-ms-transform":U,"-o-transform":U,transform:U,top:0,left:0})}E=J.top;I=J.left}T&&(J=u(F,ja,!0),T=Ca?ca:P,U=T.width()||J,T="hidden"!=T.css("overflow-y")?U-ka.vertical:U,S.width(T),W?V.css("width",100*J/T+"%"):V.outerWidth(J));Q&&K();Q=(Ca?ca:P).scrollLeft();R&&O==Q||(S.scrollLeft(Q),O=Q)}}function La(){if(P.length)if(B.support&&B.support.perfectScrollbar&&P.data().perfectScrollbar)ka={horizontal:0,vertical:0};else{if("scroll"==P.css("overflow-x"))ka.horizontal=
v;else{var E=P.width(),I=u(F,ja);ka.horizontal=E-(O<J?v:0)<I?v:0}if("scroll"==P.css("overflow-y"))ka.vertical=v;else{var O=P.height(),J=F.height();ka.vertical=O-(E<I?v:0)<J?v:0}}}var Qa=l.uniqueId(),F=a(this);if(F.data("floatThead-attached"))return!0;if(!F.is("table"))throw Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');k=B.autoReflow&&k;var ea=F.children("thead:first"),Wa=F.children("tbody:first");if(0==ea.length||0==Wa.length)B.debug&&(0==ea.length?p("The thead element is missing."):
p("The tbody element is missing.")),F.data("floatThead-lazy",B),F.unbind("reflow").one("reflow",function(){F.floatThead(B)});else{F.data("floatThead-lazy")&&F.unbind("reflow");F.data("floatThead-lazy",!1);var oa=!0,ia,Sa,ka={vertical:0,horizontal:0};l.isFunction(v)&&(v=v());var Ta=0;!0===B.scrollContainer&&(B.scrollContainer=q);var P=B.scrollContainer(F)||a([]),W=0<P.length,ca=W?a([]):B.responsiveContainer(F)||a([]),Ca=xa(),R=null;"auto"===B.position?R=null:"fixed"===B.position?R=!1:"absolute"===
B.position?R=!0:B.debug&&p('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',B.position);null==R&&(R=W);var za=F.find("caption"),ya=1==za.length;if(ya)var Aa="top"===(za.css("caption-side")||za.attr("align")||"top");var Ma=a("\x3cfthfoot\x3e").css({display:"table-footer-group","border-spacing":0,height:0,"border-collapse":"collapse",visibility:"hidden"}),Ka=!1,wa=a([]),bb=9>=n&&!W&&R,V=a("\x3ctable/\x3e"),Ga=a("\x3ccolgroup/\x3e"),fa=F.children("colgroup:first"),
ua=!0;0==fa.length&&(fa=a("\x3ccolgroup/\x3e"),ua=!1);var va=a("\x3cfthtr\x3e").css({display:"table-row","border-spacing":0,height:0,"border-collapse":"collapse"}),S=a("\x3cdiv\x3e").css(B.floatContainerCss).attr("aria-hidden","true"),Da=!1,pa=a("\x3cthead/\x3e"),ta=a('\x3ctr class\x3d"size-row" aria-hidden\x3d"true"/\x3e'),Ra=a([]),na=a([]),Ua=a([]),ja=a([]);pa.append(ta);F.prepend(fa);g&&(Ma.append(va),F.append(Ma));V.append(Ga);S.append(V);B.copyTableClass&&V.attr("class",F.attr("class"));V.attr({cellpadding:F.attr("cellpadding"),
cellspacing:F.attr("cellspacing"),border:F.attr("border")});var Y=F.css("display");V.css({borderCollapse:F.css("borderCollapse"),border:F.css("border"),display:Y});W||V.css("width","auto");"none"===Y&&(Da=!0);V.addClass(B.floatTableClass).css({margin:0,"border-bottom-width":0});R?(Y=function(E,I){var O=E.css("position"),J=E;if("relative"!=O&&"absolute"!=O||I)I={paddingLeft:E.css("paddingLeft"),paddingRight:E.css("paddingRight")},S.css(I),J=E.data("floatThead-containerWrap")||E.wrap(a("\x3cdiv\x3e").addClass(B.floatWrapperClass).css({position:"relative",
clear:"both"})).parent(),E.data("floatThead-containerWrap",J),Ka=!0;return J},W?(wa=Y(P,!0),wa.prepend(S)):(wa=Y(F),F.before(S))):F.before(S);S.css({position:R?"absolute":"fixed",marginTop:0,top:R?0:"auto",zIndex:B.zIndex,willChange:"transform"});S.addClass(B.floatContainerClass);L();var Va={"table-layout":"fixed"},qa={"table-layout":F.css("tableLayout")||"auto"},eb=F[0].style.width||"",Xa=F.css("minWidth")||"",Ya=!1;La();var sa=Ha();sa();var ha=Ia(),la=cb();la(ha("init"),!0);var gb=l.debounce(function(){la(ha("windowScrollDone"),
!1)},1);Y=function(){la(ha("windowScroll"),!1);bb&&gb()};var Na=function(){la(ha("containerScroll"),!1)},da=l.debounce(function(){F.is(":hidden")||(La(),L(),sa=Ha(),sa(),ha=Ia(),la(ha("reflow"),!0,!0))},1),Oa=function(){M()},Pa=function(){G()},db=function(E){E.matches?Oa():Pa()},Fa=null;window.matchMedia&&window.matchMedia("print").addListener&&!b?(Fa=window.matchMedia("print"),Fa.addListener(db)):(f.on("beforeprint",Oa),f.on("afterprint",Pa));if(W)if(R)P.on(D("scroll"),Na);else P.on(D("scroll"),
Na),f.on(D("scroll"),Y);else ca.on(D("scroll"),Na),f.on(D("scroll"),Y);f.on(D("load"),da);d(D("resize"),function(){F.is(":hidden")||(L(),La(),sa=Ha(),sa(),ha=Ia(),la=cb(),la(ha("resize"),!0,!0))});F.on("reflow",da);if(B.support&&B.support.datatables&&y(F))F.on("filter",da).on("sort",da).on("page",da);if(B.support&&B.support.bootstrap)f.on(D("shown.bs.tab"),da);if(B.support&&B.support.jqueryUI)f.on(D("tabsactivate"),da);k&&(Y=null,l.isFunction(B.autoReflow)&&(Y=B.autoReflow(F,P)),Y||(Y=P.length?P[0]:
F[0]),r=new MutationObserver(function(E){for(var I=function(J){return J&&J[0]&&("THEAD"==J[0].nodeName||"TD"==J[0].nodeName||"TH"==J[0].nodeName)},O=0;O<E.length;O++)if(!I(E[O].addedNodes)&&!I(E[O].removedNodes)){da();break}}),r.observe(Y,{childList:!0,subtree:!0}));F.data("floatThead-attached",{destroy:function(){var E=".fth-"+Qa;M();F.css(qa);fa.remove();g&&Ma.remove();pa.parent().length&&pa.replaceWith(ea);Z(!1);k&&(r.disconnect(),r=null);F.off("reflow reflowed");P.off(E);ca.off(E);Ka&&(P.length?
P.unwrap():F.unwrap());W?P.data("floatThead-containerWrap",!1):F.data("floatThead-containerWrap",!1);F.css("minWidth",Xa);S.remove();F.data("floatThead-attached",!1);f.off(E);Fa&&Fa.removeListener(db);Oa=Pa=function(){};return function(){return F.floatThead(B)}},reflow:function(){da()},setHeaderHeight:function(){K()},getFloatContainer:function(){return S},getRowGroups:function(){return oa?S.find("\x3etable\x3ethead").add(F.children("tbody,tfoot")):F.children("thead,tbody,tfoot")}})}});return this}})(function(){var a=
window.jQuery;"undefined"!==typeof module&&module.exports&&!a&&(a=require("jquery"));return a}());
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"undefined"!==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){var d=-1,q=-1,p=function(k){return parseFloat(k)||0},x=function(k){var n=null,w=[];a(k).each(function(){var e=a(this),h=e.offset().top-p(e.css("margin-top")),g=0<w.length?w[w.length-1]:null;null===g?w.push(e):1>=Math.floor(Math.abs(n-h))?w[w.length-1]=g.add(e):w.push(e);n=h});return w},v=function(k){var n={byRow:!0,property:"height",
target:null,remove:!1};if("object"===typeof k)return a.extend(n,k);"boolean"===typeof k?n.byRow=k:"remove"===k&&(n.remove=!0);return n},y=a.fn.matchHeight=function(k){k=v(k);if(k.remove){var n=this;this.css(k.property,"");a.each(y._groups,function(w,e){e.elements=e.elements.not(n)});return this}if(1>=this.length&&!k.target)return this;y._groups.push({elements:this,options:k});y._apply(this,k);return this};y.version="0.7.2";y._groups=[];y._throttle=80;y._maintainScroll=!1;y._beforeUpdate=null;y._afterUpdate=
null;y._rows=x;y._parse=p;y._parseOptions=v;y._apply=function(k,n){var w=v(n);k=a(k);n=[k];var e=a(window).scrollTop(),h=a("html").outerHeight(!0),g=k.parents().filter(":hidden");g.each(function(){var f=a(this);f.data("style-cache",f.attr("style"))});g.css("display","block");w.byRow&&!w.target&&(k.each(function(){var f=a(this),b=f.css("display");"inline-block"!==b&&"flex"!==b&&"inline-flex"!==b&&(b="block");f.data("style-cache",f.attr("style"));f.css({display:b,"padding-top":"0","padding-bottom":"0",
"margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),n=x(k),k.each(function(){var f=a(this);f.attr("style",f.data("style-cache")||"")}));a.each(n,function(f,b){f=a(b);var c=0;if(w.target)c=w.target.outerHeight(!1);else{if(w.byRow&&1>=f.length){f.css(w.property,"");return}f.each(function(){var m=a(this),t=m.attr("style"),r=m.css("display");"inline-block"!==r&&"flex"!==r&&"inline-flex"!==r&&(r="block");r={display:r};r[w.property]=
"";m.css(r);m.outerHeight(!1)>c&&(c=m.outerHeight(!1));t?m.attr("style",t):m.css("display","")})}f.each(function(){var m=a(this),t=0;w.target&&m.is(w.target)||("border-box"!==m.css("box-sizing")&&(t+=p(m.css("border-top-width"))+p(m.css("border-bottom-width")),t+=p(m.css("padding-top"))+p(m.css("padding-bottom"))),m.css(w.property,c-t+"px"))})});g.each(function(){var f=a(this);f.attr("style",f.data("style-cache")||null)});y._maintainScroll&&a(window).scrollTop(e/h*a("html").outerHeight(!0));return this};
y._applyDataApi=function(){var k={};a("[data-match-height], [data-mh]").each(function(){var n=a(this),w=n.attr("data-mh")||n.attr("data-match-height");k[w]=w in k?k[w].add(n):n});a.each(k,function(){this.matchHeight(!0)})};var u=function(k){y._beforeUpdate&&y._beforeUpdate(k,y._groups);a.each(y._groups,function(){y._apply(this.elements,this.options)});y._afterUpdate&&y._afterUpdate(k,y._groups)};y._update=function(k,n){if(n&&"resize"===n.type){var w=a(window).width();if(w===d)return;d=w}k?-1===q&&
(q=setTimeout(function(){u(n);q=-1},y._throttle)):u(n)};a(y._applyDataApi);var l=a.fn.on?"on":"bind";a(window)[l]("load",function(k){y._update(!1,k)});a(window)[l]("resize orientationchange",function(k){y._update(!0,k)})});
(function(a,d){"function"===typeof define&&define.amd?define(["jquery"],function(q){return a.Bloodhound=d(q)}):"object"===typeof exports?module.exports=d(require("jquery")):a.Bloodhound=d(a.jQuery)})(this,function(a){var d=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(n){return!n||/^\s*$/.test(n)},escapeRegExChars:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$\x26")},isString:function(n){return"string"===typeof n},isNumber:function(n){return"number"===typeof n},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(n){return"undefined"===typeof n},isElement:function(n){return!(!n||1!==n.nodeType)},isJQuery:function(n){return n instanceof a},toStr:function(n){return d.isUndefined(n)||null===n?"":n+""},bind:a.proxy,each:function(n,w){a.each(n,function(e,h){return w(h,e)})},map:a.map,filter:a.grep,every:function(n,w){var e=
!0;if(!n)return e;a.each(n,function(h,g){if(!(e=w.call(null,g,h,n)))return!1});return!!e},some:function(n,w){var e=!1;if(!n)return e;a.each(n,function(h,g){if(e=w.call(null,g,h,n))return!1});return!!e},mixin:a.extend,identity:function(n){return n},clone:function(n){return a.extend(!0,{},n)},getIdGenerator:function(){var n=0;return function(){return n++}},templatify:function(n){function w(){return String(n)}return a.isFunction(n)?n:w},defer:function(n){setTimeout(n,0)},debounce:function(n,w,e){var h,
g;return function(){var f=this,b=arguments;var c=e&&!h;clearTimeout(h);h=setTimeout(function(){h=null;e||(g=n.apply(f,b))},w);c&&(g=n.apply(f,b));return g}},throttle:function(n,w){var e,h,g,f;var b=0;var c=function(){b=new Date;g=null;f=n.apply(e,h)};return function(){var m=new Date,t=w-(m-b);e=this;h=arguments;0>=t?(clearTimeout(g),g=null,b=m,f=n.apply(e,h)):g||(g=setTimeout(c,t));return f}},stringify:function(n){return d.isString(n)?n:JSON.stringify(n)},guid:function(){function n(w){var e=(Math.random().toString(16)+
"000000000").substr(2,8);return w?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+n()+n(!0)+n(!0)+n()},noop:function(){}}}(),q=function(){function n(g){return(g=d.toStr(g))?g.split(/\s+/):[]}function w(g){return(g=d.toStr(g))?g.split(/\W+/):[]}function e(g){g=d.toStr(g);var f=[],b="";d.each(g.split(""),function(c){c.match(/\s+/)?b="":(f.push(b+c),b+=c)});return f}function h(g){return function(f){f=d.isArray(f)?f:[].slice.call(arguments,0);return function(b){var c=[];d.each(f,function(m){c=c.concat(g(d.toStr(b[m])))});
return c}}}return{nonword:w,whitespace:n,ngram:e,obj:{nonword:h(w),whitespace:h(n),ngram:h(e)}}}(),p=function(){function n(h){this.maxSize=d.isNumber(h)?h:100;this.reset();0>=this.maxSize&&(this.set=this.get=a.noop)}function w(){this.head=this.tail=null}function e(h,g){this.key=h;this.val=g;this.prev=this.next=null}d.mixin(n.prototype,{set:function(h,g){var f=this.list.tail;this.size>=this.maxSize&&(this.list.remove(f),delete this.hash[f.key],this.size--);(f=this.hash[h])?(f.val=g,this.list.moveToFront(f)):
(f=new e(h,g),this.list.add(f),this.hash[h]=f,this.size++)},get:function(h){if(h=this.hash[h])return this.list.moveToFront(h),h.val},reset:function(){this.size=0;this.hash={};this.list=new w}});d.mixin(w.prototype,{add:function(h){this.head&&(h.next=this.head,this.head.prev=h);this.head=h;this.tail=this.tail||h},remove:function(h){h.prev?h.prev.next=h.next:this.head=h.next;h.next?h.next.prev=h.prev:this.tail=h.prev},moveToFront:function(h){this.remove(h);this.add(h)}});return n}(),x=function(){function n(h,
g){this.prefix=["__",h,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+d.escapeRegExChars(this.prefix));this.ls=g||e;!this.ls&&this._noop()}function w(h){return JSON.stringify(d.isUndefined(h)?null:h)}try{var e=window.localStorage;e.setItem("~~~","!");e.removeItem("~~~")}catch(h){e=null}d.mixin(n.prototype,{_prefix:function(h){return this.prefix+h},_ttlKey:function(h){return this._prefix(h)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=d.noop},
_safeSet:function(h,g){try{this.ls.setItem(h,g)}catch(f){"QuotaExceededError"===f.name&&(this.clear(),this._noop())}},get:function(h){this.isExpired(h)&&this.remove(h);return a.parseJSON(this.ls.getItem(this._prefix(h)))},set:function(h,g,f){d.isNumber(f)?this._safeSet(this._ttlKey(h),w((new Date).getTime()+f)):this.ls.removeItem(this._ttlKey(h));return this._safeSet(this._prefix(h),w(g))},remove:function(h){this.ls.removeItem(this._ttlKey(h));this.ls.removeItem(this._prefix(h));return this},clear:function(){var h=
this.keyMatcher;var g,f,b=[],c=e.length;for(g=0;g<c;g++)(f=e.key(g)).match(h)&&b.push(f.replace(h,""));for(h=b.length;h--;)this.remove(b[h]);return this},isExpired:function(h){h=a.parseJSON(this.ls.getItem(this._ttlKey(h)));return d.isNumber(h)&&(new Date).getTime()>h?!0:!1}});return n}(),v=function(){function n(g){g=g||{};this.maxPendingRequests=g.maxPendingRequests||6;this.cancelled=!1;this.lastReq=null;this._send=g.transport;this._get=g.limiter?g.limiter(this._get):this._get;this._cache=!1===g.cache?
new p(0):h}var w=0,e={},h=new p(10);n.setMaxPendingRequests=function(g){this.maxPendingRequests=g};n.resetCache=function(){h.reset()};d.mixin(n.prototype,{_fingerprint:function(g){g=g||{};return g.url+g.type+a.param(g.data||{})},_get:function(g,f){function b(A){f(null,A);t._cache.set(z,A)}function c(){f(!0)}function m(){w--;delete e[z];t.onDeckRequestArgs&&(t._get.apply(t,t.onDeckRequestArgs),t.onDeckRequestArgs=null)}var t=this,r;var z=this._fingerprint(g);this.cancelled||z!==this.lastReq||((r=e[z])?
r.done(b).fail(c):w<this.maxPendingRequests?(w++,e[z]=this._send(g).done(b).fail(c).always(m)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(g,f){var b;f=f||a.noop;g=d.isString(g)?{url:g}:g||{};var c=this._fingerprint(g);this.cancelled=!1;this.lastReq=c;(b=this._cache.get(c))?f(null,b):this._get(g,f)},cancel:function(){this.cancelled=!0}});return n}(),y=window.SearchIndex=function(){function n(h){h=h||{};h.datumTokenizer&&h.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required");
this.identify=h.identify||d.stringify;this.datumTokenizer=h.datumTokenizer;this.queryTokenizer=h.queryTokenizer;this.matchAnyQueryToken=h.matchAnyQueryToken;this.reset()}function w(h){h=d.filter(h,function(g){return!!g});return h=d.map(h,function(g){return g.toLowerCase()})}function e(h){for(var g={},f=[],b=0,c=h.length;b<c;b++)g[h[b]]||(g[h[b]]=!0,f.push(h[b]));return f}d.mixin(n.prototype,{bootstrap:function(h){this.datums=h.datums;this.trie=h.trie},add:function(h){var g=this;h=d.isArray(h)?h:[h];
d.each(h,function(f){var b;g.datums[b=g.identify(f)]=f;f=w(g.datumTokenizer(f));d.each(f,function(c){var m;var t=g.trie;for(c=c.split("");m=c.shift();)t=t.c[m]||(t.c[m]={i:[],c:{}}),t.i.push(b)})})},get:function(h){var g=this;return d.map(h,function(f){return g.datums[f]})},search:function(h){var g=this,f;h=w(this.queryTokenizer(h));d.each(h,function(b){var c;if(f&&0===f.length&&!g.matchAnyQueryToken)return!1;var m=g.trie;for(b=b.split("");m&&(c=b.shift());)m=m.c[c];if(m&&0===b.length){c=m.i.slice(0);
if(f){m=f;var t=b=0,r=[];m=m.sort();c=c.sort();for(var z=m.length,A=c.length;b<z&&t<A;)m[b]<c[t]?b++:(m[b]>c[t]||(r.push(m[b]),b++),t++);m=r}else m=c;f=m}else if(!g.matchAnyQueryToken)return f=[],!1});return f?d.map(e(f),function(b){return g.datums[b]}):[]},all:function(){var h=[],g;for(g in this.datums)h.push(this.datums[g]);return h},reset:function(){this.datums={};this.trie={i:[],c:{}}},serialize:function(){return{datums:this.datums,trie:this.trie}}});return n}(),u=function(){function n(w){this.url=
w.url;this.ttl=w.ttl;this.cache=w.cache;this.prepare=w.prepare;this.transform=w.transform;this.transport=w.transport;this.thumbprint=w.thumbprint;this.storage=new x(w.cacheKey)}d.mixin(n.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(w){this.cache&&(this.storage.set("data",w,this.ttl),this.storage.set("protocol",location.protocol,this.ttl),this.storage.set("thumbprint",this.thumbprint,this.ttl))},fromCache:function(){if(!this.cache)return null;var w=
this.storage.get("data");var e=this.storage.get("protocol");e=this.storage.get("thumbprint")!==this.thumbprint||e!==location.protocol;return w&&!e?w:null},fromNetwork:function(w){var e=this;if(w){var h=this.prepare(this._settings());this.transport(h).fail(function(){w(!0)}).done(function(g){w(null,e.transform(g))})}},clear:function(){this.storage.clear();return this}});return n}(),l=function(){function n(w){this.url=w.url;this.prepare=w.prepare;this.transform=w.transform;this.indexResponse=w.indexResponse;
this.transport=new v({cache:w.cache,limiter:w.limiter,transport:w.transport,maxPendingRequests:w.maxPendingRequests})}d.mixin(n.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(w,e){var h=this;if(e)return w=this.prepare(w||"",this._settings()),this.transport.get(w,function(g,f){g?e([]):e(h.transform(f))})},cancelLastRequest:function(){this.transport.cancel()}});return n}(),k=function(){function n(f){if(!f)return null;var b={url:null,ttl:864E5,cache:!0,
cacheKey:null,thumbprint:"",prepare:d.identity,transform:d.identity,transport:null};f=d.isString(f)?{url:f}:f;f=d.mixin(b,f);!f.url&&a.error("prefetch requires url to be set");f.transform=f.filter||f.transform;f.cacheKey=f.cacheKey||f.url;f.thumbprint="1.2.0"+f.thumbprint;f.transport=f.transport?g(f.transport):a.ajax;return f}function w(f){if(f){var b={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:d.identity,transport:null};
f=d.isString(f)?{url:f}:f;f=d.mixin(b,f);!f.url&&a.error("remote requires url to be set");f.transform=f.filter||f.transform;f.prepare=e(f);f.limiter=h(f);f.transport=f.transport?g(f.transport):a.ajax;delete f.replace;delete f.wildcard;delete f.rateLimitBy;delete f.rateLimitWait;return f}}function e(f){function b(A,C){C.url=r(C.url,A);return C}function c(A,C){C.url=C.url.replace(z,encodeURIComponent(A));return C}function m(A,C){return C}var t=f.prepare;var r=f.replace;var z=f.wildcard;return t?t:t=
r?b:f.wildcard?c:m}function h(f){function b(r){return function(z){return d.debounce(z,r)}}function c(r){return function(z){return d.throttle(z,r)}}var m=f.limiter;var t=f.rateLimitBy;f=f.rateLimitWait;m||(m=/^throttle$/i.test(t)?c(f):b(f));return m}function g(f){return function(b){var c=a.Deferred();f(b,function(m){d.defer(function(){c.resolve(m)})},function(m){d.defer(function(){c.reject(m)})});return c}}return function(f){f=d.mixin({initialize:!0,identify:d.stringify,datumTokenizer:null,queryTokenizer:null,
matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},f||{});!f.datumTokenizer&&a.error("datumTokenizer is required");!f.queryTokenizer&&a.error("queryTokenizer is required");var b=f.sorter;f.sorter=b?function(c){return c.sort(b)}:d.identity;f.local=d.isFunction(f.local)?f.local():f.local;f.prefetch=n(f.prefetch);f.remote=w(f.remote);return f}}();return function(){function n(e){e=k(e);this.sorter=e.sorter;this.identify=e.identify;this.sufficient=e.sufficient;
this.indexRemote=e.indexRemote;this.local=e.local;this.remote=e.remote?new l(e.remote):null;this.prefetch=e.prefetch?new u(e.prefetch):null;this.index=new y({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer});!1!==e.initialize&&this.initialize()}var w=window&&window.Bloodhound;n.noConflict=function(){window&&(window.Bloodhound=w);return n};n.tokenizers=q;d.mixin(n.prototype,{__ttAdapter:function(){function e(f,b,c){return g.search(f,b,c)}function h(f,b){return g.search(f,
b)}var g=this;return this.remote?e:h},_loadPrefetch:function(){function e(b,c){if(b)return f.reject();h.add(c);h.prefetch.store(h.index.serialize());f.resolve()}var h=this,g;var f=a.Deferred();this.prefetch?(g=this.prefetch.fromCache())?(this.index.bootstrap(g),f.resolve()):this.prefetch.fromNetwork(e):f.resolve();return f.promise()},_initialize:function(){var e=this;this.clear();(this.initPromise=this._loadPrefetch()).done(function(){e.add(e.local)});return this.initPromise},initialize:function(e){return!this.initPromise||
e?this._initialize():this.initPromise},add:function(e){this.index.add(e);return this},get:function(e){e=d.isArray(e)?e:[].slice.call(arguments);return this.index.get(e)},search:function(e,h,g){function f(m){var t=[];d.each(m,function(r){!d.some(c,function(z){return b.identify(r)===b.identify(z)})&&t.push(r)});b.indexRemote&&b.add(t);g(t)}var b=this;h=h||d.noop;g=g||d.noop;var c=this.sorter(this.index.search(e));h(this.remote?c.slice():c);this.remote&&c.length<this.sufficient?this.remote.get(e,f):
this.remote&&this.remote.cancelLastRequest();return this},all:function(){return this.index.all()},clear:function(){this.index.reset();return this},clearPrefetchCache:function(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function(){v.resetCache();return this},ttAdapter:function(){return this.__ttAdapter()}});return n}()});
(function(a,d){"function"===typeof define&&define.amd?define(["jquery"],function(q){return d(q)}):"object"===typeof exports?module.exports=d(require("jquery")):d(a.jQuery)})(this,function(a){var d=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26")},isString:function(e){return"string"===
typeof e},isNumber:function(e){return"number"===typeof e},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(e){return"undefined"===typeof e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof a},toStr:function(e){return d.isUndefined(e)||null===e?"":e+""},bind:a.proxy,each:function(e,h){a.each(e,function(g,f){return h(f,g)})},map:a.map,filter:a.grep,every:function(e,h){var g=!0;if(!e)return g;a.each(e,function(f,b){if(!(g=
h.call(null,b,f,e)))return!1});return!!g},some:function(e,h){var g=!1;if(!e)return g;a.each(e,function(f,b){if(g=h.call(null,b,f,e))return!1});return!!g},mixin:a.extend,identity:function(e){return e},clone:function(e){return a.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){function h(){return String(e)}return a.isFunction(e)?e:h},defer:function(e){setTimeout(e,0)},debounce:function(e,h,g){var f,b;return function(){var c=this,m=arguments;var t=
g&&!f;clearTimeout(f);f=setTimeout(function(){f=null;g||(b=e.apply(c,m))},h);t&&(b=e.apply(c,m));return b}},throttle:function(e,h){var g,f,b,c;var m=0;var t=function(){m=new Date;b=null;c=e.apply(g,f)};return function(){var r=new Date,z=h-(r-m);g=this;f=arguments;0>=z?(clearTimeout(b),b=null,m=r,c=e.apply(g,f)):b||(b=setTimeout(t,z));return c}},stringify:function(e){return d.isString(e)?e:JSON.stringify(e)},guid:function(){function e(h){var g=(Math.random().toString(16)+"000000000").substr(2,8);return h?
"-"+g.substr(0,4)+"-"+g.substr(4,4):g}return"tt-"+e()+e(!0)+e(!0)+e()},noop:function(){}}}(),q=function(){function e(f){var b={};d.each(f,function(c,m){b[m]="."+c});return b}function h(){var f={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",
top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};d.isMsie()&&d.mixin(f.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});return f}var g={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(f){f=
d.mixin({},g,f);var b={css:h(),classes:f,html:{wrapper:'\x3cspan class\x3d"'+f.wrapper+'"\x3e\x3c/span\x3e',menu:'\x3cdiv role\x3d"listbox" class\x3d"'+f.menu+'"\x3e\x3c/div\x3e'},selectors:e(f)};return{css:b.css,html:b.html,classes:b.classes,selectors:b.selectors,mixin:function(c){d.mixin(c,b)}}}}(),p=function(){function e(g){g&&g.el||a.error("EventBus initialized without el");this.$el=a(g.el)}var h={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};d.mixin(e.prototype,
{_trigger:function(g,f){g=a.Event("typeahead:"+g);this.$el.trigger.call(this.$el,g,f||[]);return g},before:function(g){var f=[].slice.call(arguments,1);return this._trigger("before"+g,f).isDefaultPrevented()},trigger:function(g){var f;this._trigger(g,[].slice.call(arguments,1));(f=h[g])&&this._trigger(f,[].slice.call(arguments,1))}});return e}(),x=function(){function e(c,m,t,r){if(!t)return this;m=m.split(f);t=r?g(t,r):t;for(this._callbacks=this._callbacks||{};r=m.shift();)this._callbacks[r]=this._callbacks[r]||
{sync:[],async:[]},this._callbacks[r][c].push(t);return this}function h(c,m,t){return function(){for(var r,z=0,A=c.length;!r&&z<A;z+=1)r=!1===c[z].apply(m,t);return!r}}function g(c,m){return c.bind?c.bind(m):function(){c.apply(m,[].slice.call(arguments,0))}}var f=/\s+/,b=function(){return window.setImmediate?function(c){setImmediate(function(){c()})}:function(c){setTimeout(function(){c()},0)}}();return{onSync:function(c,m,t){return e.call(this,"sync",c,m,t)},onAsync:function(c,m,t){return e.call(this,
"async",c,m,t)},off:function(c){var m;if(!this._callbacks)return this;for(c=c.split(f);m=c.shift();)delete this._callbacks[m];return this},trigger:function(c){var m,t,r;if(!this._callbacks)return this;c=c.split(f);for(r=[].slice.call(arguments,1);(m=c.shift())&&(t=this._callbacks[m]);){var z=h(t.sync,this,[m].concat(r));var A=h(t.async,this,[m].concat(r));z()&&b(A)}return this}}}(),v=function(e){function h(c){return b[c.toUpperCase()]||c}function g(c,m,t,r){for(var z=[],A=0,C=c.length;A<C;A++){var B=
d.escapeRegExChars(c[A]);r&&(B=B.replace(/\S/g,h));z.push(B)}c=t?"\\b("+z.join("|")+")\\b":"("+z.join("|")+")";return m?new RegExp(c):new RegExp(c,"i")}var f={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},b={A:"[Aa--------]",B:"[Bb--]",C:"[Cc--]",D:"[Dd-----]",E:"[Ee------]",F:"[Ff--]",
G:"[Gg--]",H:"[Hh---]",I:"[Ii---------]",J:"[Jj--]",K:"[Kk-K-]",L:"[Ll----]",M:"[Mm----]",N:"[Nn---]",O:"[Oo-----]",P:"[Pp---]",Q:"[Qq]",R:"[Rr-----]",S:"[Ss---]",
T:"[Tt--]",U:"[Uu------]",V:"[Vv----]",W:"[Ww--]",X:"[Xx---]",Y:"[Yy--]",Z:"[Zz----]"};return function(c){function m(r,z){for(var A,C=0;C<r.childNodes.length;C++)A=r.childNodes[C],3===A.nodeType?C+=z(A)?1:0:m(A,z)}c=d.mixin({},f,c);if(c.node&&c.pattern){c.pattern=d.isArray(c.pattern)?c.pattern:[c.pattern];var t=g(c.pattern,c.caseSensitive,c.wordsOnly,c.diacriticInsensitive);
m(c.node,function(r){var z;if(z=t.exec(r.data)){var A=e.createElement(c.tagName);c.className&&(A.className=c.className);var C=r.splitText(z.index);C.splitText(z[0].length);A.appendChild(C.cloneNode(!0));r.parentNode.replaceChild(A,C)}return!!z})}}}(window.document),y=function(){function e(g,f){g=g||{};g.input||a.error("input is missing");f.mixin(this);this.$hint=a(g.hint);this.$input=a(g.input);this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox",
"aria-readonly":"true","aria-autocomplete":"list"});a(f.menu).attr("id",this.$input.attr("id")+"_listbox");this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;g=this.$input;this.$overflowHelper=a('\x3cpre aria-hidden\x3d"true"\x3e\x3c/pre\x3e').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:g.css("font-family"),fontSize:g.css("font-size"),fontStyle:g.css("font-style"),fontVariant:g.css("font-variant"),fontWeight:g.css("font-weight"),wordSpacing:g.css("word-spacing"),
letterSpacing:g.css("letter-spacing"),textIndent:g.css("text-indent"),textRendering:g.css("text-rendering"),textTransform:g.css("text-transform")}).insertAfter(g);this._checkLanguageDirection();0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=d.noop);this.onSync("cursorchange",this._updateDescendent)}var h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};e.normalizeQuery=function(g){return d.toStr(g).replace(/^\s*/g,"").replace(/\s{2,}/g,
" ")};d.mixin(e.prototype,x,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function(g){var f=h[g.which||g.keyCode];this._managePreventDefault(f,g);f&&this._shouldTrigger(f,g)&&this.trigger(f+"Keyed",g)},_onInput:function(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function(g,f){switch(g){case "up":case "down":g=!(f.altKey||
f.ctrlKey||f.metaKey||f.shiftKey);break;default:g=!1}g&&f.preventDefault()},_shouldTrigger:function(g,f){switch(g){case "tab":g=!(f.altKey||f.ctrlKey||f.metaKey||f.shiftKey);break;default:g=!0}return g},_checkLanguageDirection:function(){var g=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==g&&(this.dir=g,this.$hint.attr("dir",g),this.trigger("langDirChanged",g))},_setQuery:function(g,f){var b=this.query;var c=(b=e.normalizeQuery(g)===e.normalizeQuery(b))?this.query.length!==g.length:
!1;this.query=g;f||b?!f&&c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(g,f){this.$input.attr("aria-activedescendant",f)},bind:function(){var g=this;var f=d.bind(this._onBlur,this);var b=d.bind(this._onFocus,this);var c=d.bind(this._onKeydown,this);var m=d.bind(this._onInput,this);this.$input.on("blur.tt",f).on("focus.tt",b).on("keydown.tt",c);if(!d.isMsie()||9<d.isMsie())this.$input.on("input.tt",m);else this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",
function(t){h[t.which||t.keyCode]||d.defer(d.bind(g._onInput,g,t))});return this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(g,f){this.setInputValue(g);this._setQuery(g,f)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(g){this.$input.val(g);this.clearHintIfInvalid();
this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(g){this.$hint.val(g)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var g=this.getInputValue();var f=this.getHint();f=g!==f&&0===f.indexOf(g);""!==g&&f&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var g=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());
return this.$overflowHelper.width()>=g},isCursorAtEnd:function(){var g=this.$input.val().length;var f=this.$input[0].selectionStart;return d.isNumber(f)?f===g:document.selection?(f=document.selection.createRange(),f.moveStart("character",-g),g===f.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=a("\x3cdiv\x3e")}});return e}(),u=function(){function e(b,c){b=b||{};b.templates=b.templates||{};b.templates.notFound=
b.templates.notFound||b.templates.empty;b.source||a.error("missing source");b.node||a.error("missing node");b.name&&!/^[_a-zA-Z0-9-]+$/.test(b.name)&&a.error("invalid dataset name: "+b.name);c.mixin(this);this.highlight=!!b.highlight;this.name=d.toStr(b.name||f());this.limit=b.limit||5;this.displayFn=h(b.display||b.displayKey);this.templates=g(b.templates,this.displayFn);this.source=b.source.__ttAdapter?b.source.__ttAdapter():b.source;this.async=d.isUndefined(b.async)?2<this.source.length:!!b.async;
this._resetLastSuggestion();this.$el=a(b.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function h(b){function c(m){return m[b]}b=b||d.stringify;return d.isFunction(b)?b:c}function g(b,c){function m(t){return a('\x3cdiv role\x3d"option"\x3e').attr("id",d.guid()).text(c(t))}return{notFound:b.notFound&&d.templatify(b.notFound),pending:b.pending&&d.templatify(b.pending),header:b.header&&d.templatify(b.header),footer:b.footer&&d.templatify(b.footer),
suggestion:b.suggestion||m}}var f=d.getIdGenerator();e.extractData=function(b){b=a(b);return b.data("tt-selectable-object")?{dataset:b.data("tt-selectable-dataset")||"",val:b.data("tt-selectable-display")||"",obj:b.data("tt-selectable-object")||null}:null};d.mixin(e.prototype,x,{_overwrite:function(b,c){c=c||[];c.length?this._renderSuggestions(b,c):this.async&&this.templates.pending?this._renderPending(b):!this.async&&this.templates.notFound?this._renderNotFound(b):this._empty();this.trigger("rendered",
c,!1,this.name)},_append:function(b,c){c=c||[];c.length&&this.$lastSuggestion.length?this._appendSuggestions(b,c):c.length?this._renderSuggestions(b,c):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(b);this.trigger("rendered",c,!0,this.name)},_renderSuggestions:function(b,c){var m=this._getSuggestionsFragment(b,c);this.$lastSuggestion=m.children().last();this.$el.html(m).prepend(this._getHeader(b,c)).append(this._getFooter(b,c))},_appendSuggestions:function(b,c){b=this._getSuggestionsFragment(b,
c);c=b.children().last();this.$lastSuggestion.after(b);this.$lastSuggestion=c},_renderPending:function(b){var c=this.templates.pending;this._resetLastSuggestion();c&&this.$el.html(c({query:b,dataset:this.name}))},_renderNotFound:function(b){var c=this.templates.notFound;this._resetLastSuggestion();c&&this.$el.html(c({query:b,dataset:this.name}))},_empty:function(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function(b,c){var m=this;var t=document.createDocumentFragment();
d.each(c,function(r){var z=m._injectQuery(b,r);r=a(m.templates.suggestion(z)).data("tt-selectable-dataset",m.name).data("tt-selectable-object",r).data("tt-selectable-display",m.displayFn(r)).addClass(m.classes.suggestion+" "+m.classes.selectable);t.appendChild(r[0])});this.highlight&&v({className:this.classes.highlight,node:t,pattern:b});return a(t)},_getFooter:function(b,c){return this.templates.footer?this.templates.footer({query:b,suggestions:c,dataset:this.name}):null},_getHeader:function(b,c){return this.templates.header?
this.templates.header({query:b,suggestions:c,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(b,c){return d.isObject(c)?d.mixin({_query:b},c):c},update:function(b){function c(A){r||(r=!0,A=(A||[]).slice(0,m.limit),z=A.length,m._overwrite(b,A),z<m.limit&&m.async&&m.trigger("asyncRequested",b,m.name))}var m=this,t=!1,r=!1,z=0;this.cancel();this.cancel=function(){t=!0;m.cancel=a.noop;m.async&&m.trigger("asyncCanceled",b,m.name)};this.source(b,
c,function(A){A=A||[];if(!t&&z<m.limit){m.cancel=a.noop;var C=Math.abs(z-m.limit);z+=C;m._append(b,A.slice(0,C));m.async&&m.trigger("asyncReceived",b,m.name)}});!r&&c([])},cancel:a.noop,clear:function(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("\x3cdiv\x3e")}});return e}(),l=function(){function e(h,g){var f=this;h=h||{};h.node||a.error("node is required");g.mixin(this);this.$node=a(h.node);this.query=null;this.datasets=
d.map(h.datasets,function(b){var c=f.$node.find(b.node).first();b.node=c.length?c:a("\x3cdiv\x3e").appendTo(f.$node);return new u(b,g)})}d.mixin(e.prototype,x,{_onSelectableClick:function(h){this.trigger("selectableClicked",a(h.currentTarget))},_onRendered:function(h,g,f,b){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",g,f,b)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},
_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return d.every(this.datasets,d.bind(function(h){h=h.isEmpty();this.$node.attr("aria-expanded",!h);return h},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var h=this.getActiveSelectable();h&&h.removeClass(this.classes.cursor)},_ensureVisible:function(h){var g=h.position().top;h=g+h.outerHeight(!0);var f=this.$node.scrollTop();var b=this.$node.height()+
parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);0>g?this.$node.scrollTop(f+g):b<h&&this.$node.scrollTop(f+(h-b))},bind:function(){var h=this;var g=d.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,g);this.$node.on("mouseover",this.selectors.selectable,function(){h.setCursor(a(this))});this.$node.on("mouseleave",function(){h._removeCursor()});d.each(this.datasets,function(f){f.onSync("asyncRequested",h._propagate,h).onSync("asyncCanceled",
h._propagate,h).onSync("asyncReceived",h._propagate,h).onSync("rendered",h._onRendered,h).onSync("cleared",h._onCleared,h)});return this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0);this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1);this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function(h){this.$node.attr("dir",h)},selectableRelativeToCursor:function(h){var g=
this.getActiveSelectable();var f=this._getSelectables();h=((g?f.index(g):-1)+h+1)%(f.length+1)-1;h=-1>h?f.length-1:h;return-1===h?null:f.eq(h)},setCursor:function(h){this._removeCursor();if(h=h&&h.first())h.addClass(this.classes.cursor),this._ensureVisible(h)},getSelectableData:function(h){return h&&h.length?u.extractData(h):null},getActiveSelectable:function(){var h=this._getSelectables().filter(this.selectors.cursor).first();return h.length?h:null},getTopSelectable:function(){var h=this._getSelectables().first();
return h.length?h:null},update:function(h){function g(b){b.update(h)}var f=h!==this.query;f&&(this.query=h,d.each(this.datasets,g));return f},empty:function(){d.each(this.datasets,function(h){h.clear()});this.query=null;this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt");this.$node=a("\x3cdiv\x3e");d.each(this.datasets,function(h){h.destroy()})}});return e}(),k=function(){function e(h){this.$el=a("\x3cspan\x3e\x3c/span\x3e",{role:"status","aria-live":"polite"}).css({position:"absolute",
padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"});h.$input.after(this.$el);d.each(h.menu.datasets,d.bind(function(g){g.onSync&&(g.onSync("rendered",d.bind(this.update,this)),g.onSync("cleared",d.bind(this.cleared,this)))},this))}d.mixin(e.prototype,{update:function(h,g){var f,b;h=g.length;1===h?(f="result",b="is"):(f="results",b="are");this.$el.text(h+" "+f+" "+b+" available, use up and down arrow keys to navigate.")},
cleared:function(){this.$el.text("")}});return e}(),n=function(){function e(){l.apply(this,[].slice.call(arguments,0))}var h=l.prototype;d.mixin(e.prototype,l.prototype,{open:function(){!this._allDatasetsEmpty()&&this._show();return h.open.apply(this,[].slice.call(arguments,0))},close:function(){this._hide();return h.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show();return h._onRendered.apply(this,[].slice.call(arguments,
0))},_onCleared:function(){this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show();return h._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(g){this.$node.css("ltr"===g?this.css.ltr:this.css.rtl);return h.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}});return e}(),w=function(){function e(g,f){g=g||{};g.input||a.error("missing input");g.menu||a.error("missing menu");
g.eventBus||a.error("missing event bus");f.mixin(this);this.eventBus=g.eventBus;this.minLength=d.isNumber(g.minLength)?g.minLength:1;this.input=g.input;this.menu=g.menu;this.enabled=!0;this.autoselect=!!g.autoselect;this.selectionKey=g.selectionKey;this.active=!1;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",
this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);g=h(this,"activate","open","_onFocused");f=h(this,"deactivate","_onBlurred");var b=h(this,"isActive","isOpen","_onEnterKeyed");var c=h(this,"isActive","isOpen","_onTabKeyed");var m=h(this,"isActive","_onEscKeyed");var t=h(this,"isActive","open","_onUpKeyed");var r=h(this,"isActive","open","_onDownKeyed");var z=h(this,
"isActive","isOpen","_onLeftKeyed");var A=h(this,"isActive","isOpen","_onRightKeyed");var C=h(this,"_openIfActive","_onQueryChanged");var B=h(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",g,this).onSync("blurred",f,this).onSync("enterKeyed",b,this).onSync("tabKeyed",c,this).onSync("escKeyed",m,this).onSync("upKeyed",t,this).onSync("downKeyed",r,this).onSync("leftKeyed",z,this).onSync("rightKeyed",A,this).onSync("queryChanged",C,this).onSync("whitespaceChanged",B,
this).onSync("langDirChanged",this._onLangDirChanged,this)}function h(g){var f=[].slice.call(arguments,1);return function(){var b=[].slice.call(arguments);d.each(f,function(c){return g[c].apply(g,b)})}}d.mixin(e.prototype,{_hacks:function(){var g=this.input.$input||a("\x3cdiv\x3e");var f=this.menu.$node||a("\x3cdiv\x3e");g.on("blur.tt",function(b){var c=document.activeElement;var m=f.is(c);c=0<f.has(c).length;d.isMsie()&&(m||c)&&(b.preventDefault(),b.stopImmediatePropagation(),d.defer(function(){g.focus()}))});
f.on("mousedown.tt",function(b){b.preventDefault()})},_onSelectableClicked:function(g,f){this.select(f)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(g,f,b,c){this._updateHint();this.autoselect&&(g=this.selectors.cursor.substr(1),this.menu.$node.find(this.selectors.suggestion).first().addClass(g));this.eventBus.trigger("render",f,b,c)},_onAsyncRequested:function(g,f,b){this.eventBus.trigger("asyncrequest",b,f)},_onAsyncCanceled:function(g,f,b){this.eventBus.trigger("asynccancel",
b,f)},_onAsyncReceived:function(g,f,b){this.eventBus.trigger("asyncreceive",b,f)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(g,f){(g=this.menu.getActiveSelectable())?this.select(g)&&(f.preventDefault(),f.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(f.preventDefault(),f.stopPropagation())},
_onTabKeyed:function(g,f){var b;(b=this.menu.getActiveSelectable())?this.select(b)&&f.preventDefault():(b=this.menu.getTopSelectable())&&this.autocomplete(b)&&f.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&
this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(g,f){this._minLengthMet(f)?this.menu.update(f):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(g,f){this.dir!==f&&(this.dir=f,this.menu.setLanguageDirection(f))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(g){g=d.isString(g)?g:this.input.getQuery()||"";return g.length>=this.minLength},_updateHint:function(){var g=
this.menu.getTopSelectable();var f=this.menu.getSelectableData(g);g=this.input.getInputValue();if(!f||d.isBlankString(g)||this.input.hasOverflow())this.input.clearHint();else{var b=y.normalizeQuery(g);b=d.escapeRegExChars(b);b=new RegExp("^(?:"+b+")(.+$)","i");(f=b.exec(f.val))&&this.input.setHint(g+f[1])}},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){if(this.isActive())return!0;
if(!this.isEnabled()||this.eventBus.before("active"))return!1;this.active=!0;this.eventBus.trigger("active");return!0},deactivate:function(){if(this.isActive()){if(this.eventBus.before("idle"))return!1;this.active=!1;this.close();this.eventBus.trigger("idle")}return!0},isOpen:function(){return this.menu.isOpen()},open:function(){this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open"));return this.isOpen()},close:function(){this.isOpen()&&!this.eventBus.before("close")&&
(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close"));return!this.isOpen()},setVal:function(g){this.input.setQuery(d.toStr(g))},getVal:function(){return this.input.getQuery()},select:function(g){return(g=this.menu.getSelectableData(g))&&!this.eventBus.before("select",g.obj,g.dataset)?(this.input.setQuery(this.selectionKey?g.obj[this.selectionKey]:g.val,!0),this.eventBus.trigger("select",g.obj,g.dataset),this.close(),!0):!1},autocomplete:function(g){var f=
this.input.getQuery();return(g=this.menu.getSelectableData(g))&&f!==(this.selectionKey?g.obj[this.selectionKey]:g.val)&&!this.eventBus.before("autocomplete",g.obj,g.dataset)?(this.input.setQuery(this.selectionKey?g.obj[this.selectionKey]:g.val),this.eventBus.trigger("autocomplete",g.obj,g.dataset),!0):!1},moveCursor:function(g){var f;var b=this.input.getQuery();g=this.menu.selectableRelativeToCursor(g);var c=(f=this.menu.getSelectableData(g))?f.obj:null;var m=f?f.dataset:null;var t=g?g.attr("id"):
null;this.input.trigger("cursorchange",t);return this._minLengthMet()&&this.menu.update(b)||this.eventBus.before("cursorchange",c,m)?!1:(this.menu.setCursor(g),f?this.input.setInputValue(this.selectionKey?f.obj[this.selectionKey]:f.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",c,m),!0)},destroy:function(){this.input.destroy();this.menu.destroy()}});return e}();(function(){function e(r,z){r.each(function(){var A=a(this),C;(C=A.data(m.typeahead))&&z(C,A)})}
function h(r,z){z=r.clone().addClass(z.classes.hint).removeData().css(z.css.hint);var A=z.css;r={backgroundAttachment:r.css("background-attachment"),backgroundClip:r.css("background-clip"),backgroundColor:r.css("background-color"),backgroundImage:r.css("background-image"),backgroundOrigin:r.css("background-origin"),backgroundPosition:r.css("background-position"),backgroundRepeat:r.css("background-repeat"),backgroundSize:r.css("background-size")};return A.call(z,r).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",
tabindex:-1})}function g(r,z){r.data(m.attrs,{dir:r.attr("dir"),autocomplete:r.attr("autocomplete"),spellcheck:r.attr("spellcheck"),style:r.attr("style")});r.addClass(z.classes.input).attr({spellcheck:!1});try{!r.attr("dir")&&r.attr("dir","auto")}catch(A){}return r}function f(r){var z=r.data(m.www);var A=r.parent().filter(z.selectors.wrapper);d.each(r.data(m.attrs),function(C,B){d.isUndefined(C)?r.removeAttr(B):r.attr(B,C)});r.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(z.classes.input);
A.length&&(r.detach().insertAfter(A),A.remove())}function b(r){r=d.isJQuery(r)||d.isElement(r)?a(r).first():[];return r.length?r:null}var c=a.fn.typeahead;var m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};var t={initialize:function(r,z){z=d.isArray(z)?z:[].slice.call(arguments,1);r=r||{};var A=q(r.classNames);return this.each(function(){d.each(z,function(N){N.highlight=!!r.highlight});var C=a(this);var B=a(A.html.wrapper);var H=b(r.hint);var D=b(r.menu);var K=!1!==r.hint&&!H;var L=!1!==
r.menu&&!D;K&&(H=h(C,A));L&&(D=a(A.html.menu).css(A.css.menu));H&&H.val("");C=g(C,A);if(K||L)B.css(A.css.wrapper),C.css(K?A.css.input:A.css.inputWithNoHint),C.wrap(B).parent().prepend(K?H:null).append(L?D:null);K=L?n:l;B=new p({el:C});H=new y({hint:H,input:C},A);D=new K({node:D,datasets:z},A);new k({$input:C,menu:D});D=new w({input:H,menu:D,eventBus:B,minLength:r.minLength,autoselect:r.autoselect,selectionKey:r.selectionKey},A);C.data(m.www,A);C.data(m.typeahead,D)})},isEnabled:function(){var r;e(this.first(),
function(z){r=z.isEnabled()});return r},enable:function(){e(this,function(r){r.enable()});return this},disable:function(){e(this,function(r){r.disable()});return this},isActive:function(){var r;e(this.first(),function(z){r=z.isActive()});return r},activate:function(){e(this,function(r){r.activate()});return this},deactivate:function(){e(this,function(r){r.deactivate()});return this},isOpen:function(){var r;e(this.first(),function(z){r=z.isOpen()});return r},open:function(){e(this,function(r){r.open()});
return this},close:function(){e(this,function(r){r.close()});return this},select:function(r){var z=!1,A=a(r);e(this.first(),function(C){z=C.select(A)});return z},autocomplete:function(r){var z=!1,A=a(r);e(this.first(),function(C){z=C.autocomplete(A)});return z},moveCursor:function(r){var z=!1;e(this.first(),function(A){z=A.moveCursor(r)});return z},val:function(r){var z;if(arguments.length)return e(this,function(A){A.setVal(d.toStr(r))}),this;e(this.first(),function(A){z=A.getVal()});return z},destroy:function(){e(this,
function(r,z){f(z);r.destroy()});return this}};a.fn.typeahead=function(r){return t[r]?t[r].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)};a.fn.typeahead.noConflict=function(){a.fn.typeahead=c;return this}})()});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a,d){function q(){return new Date(Date.UTC.apply(Date,arguments))}function p(){var b=new Date;return q(b.getFullYear(),b.getMonth(),b.getDate())}function x(b){return function(){return this[b].apply(this,arguments)}}function v(b,c){function m(C,B){return B.toLowerCase()}b=a(b).data();var t={},r=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());
for(var z in b)if(c.test(z)){var A=z.replace(r,m);t[A]=b[z]}return t}function y(b){var c={};if(!g[b]&&(b=b.split("-")[0],!g[b]))return;var m=g[b];a.each(h,function(t,r){r in m&&(c[r]=m[r])});return c}var u=function(){var b={get:function(c){return this.slice(c)[0]},contains:function(c){c=c&&c.valueOf();for(var m=0,t=this.length;m<t;m++)if(this[m].valueOf()===c)return m;return-1},remove:function(c){this.splice(c,1)},replace:function(c){c&&(a.isArray(c)||(c=[c]),this.clear(),this.push.apply(this,c))},
clear:function(){this.length=0},copy:function(){var c=new u;c.replace(this);return c}};return function(){var c=[];c.push.apply(c,arguments);a.extend(c,b);return c}}(),l=function(b,c){a(b).data("datepicker",this);this._process_options(c);this.dates=new u;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=a(b);this.inputField=(this.isInput=this.element.is("input"))?this.element:this.element.find("input");this.hasInput=(this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):
!1)&&this.inputField.length;this.component&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=a(f.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):
this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(m,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);this.setDatesDisabled(this.o.datesDisabled);
this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};l.prototype={constructor:l,_resolveViewName:function(b,c){return 0===b||"days"===b||"month"===b?0:1===b||"months"===b||"year"===b?1:2===b||"years"===b||"decade"===b?2:3===b||"decades"===b||"century"===b?3:4===b||"centuries"===b||"millennium"===b?4:c===d?!1:c},_check_template:function(b){try{return b===d||""===b?!1:0>=(b.match(/[<>]/g)||[]).length?!0:0<a(b).length}catch(c){return!1}},_process_options:function(b){this._o=
a.extend({},this._o,b);var c=this.o=a.extend({},this._o);b=c.language;g[b]||(b=b.split("-")[0],g[b]||(b=e.language));c.language=b;c.startView=this._resolveViewName(c.startView,0);c.minViewMode=this._resolveViewName(c.minViewMode,0);c.maxViewMode=this._resolveViewName(c.maxViewMode,4);c.startView=Math.min(c.startView,c.maxViewMode);c.startView=Math.max(c.startView,c.minViewMode);!0!==c.multidate&&(c.multidate=Number(c.multidate)||!1,!1!==c.multidate&&(c.multidate=Math.max(0,c.multidate)));c.multidateSeparator=
String(c.multidateSeparator);c.weekStart%=7;c.weekEnd=(c.weekStart+6)%7;var m=f.parseFormat(c.format);-Infinity!==c.startDate&&(c.startDate=c.startDate?c.startDate instanceof Date?this._local_to_utc(this._zero_time(c.startDate)):f.parseDate(c.startDate,m,c.language,c.assumeNearbyYear):-Infinity);Infinity!==c.endDate&&(c.endDate=c.endDate?c.endDate instanceof Date?this._local_to_utc(this._zero_time(c.endDate)):f.parseDate(c.endDate,m,c.language,c.assumeNearbyYear):Infinity);c.daysOfWeekDisabled=c.daysOfWeekDisabled||
[];a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/));c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(r){return parseInt(r,10)});c.daysOfWeekHighlighted=c.daysOfWeekHighlighted||[];a.isArray(c.daysOfWeekHighlighted)||(c.daysOfWeekHighlighted=c.daysOfWeekHighlighted.split(/[,\s]*/));c.daysOfWeekHighlighted=a.map(c.daysOfWeekHighlighted,function(r){return parseInt(r,10)});c.datesDisabled=c.datesDisabled||[];a.isArray(c.datesDisabled)||(c.datesDisabled=
[c.datesDisabled]);c.datesDisabled=a.map(c.datesDisabled,function(r){return f.parseDate(r,m,c.language,c.assumeNearbyYear)});b=String(c.orientation).toLowerCase().split(/\s+/g);var t=c.orientation.toLowerCase();b=a.grep(b,function(r){return/^auto|left|right|top|bottom$/.test(r)});c.orientation={x:"auto",y:"auto"};if(t&&"auto"!==t)if(1===b.length)switch(b[0]){case "top":case "bottom":c.orientation.y=b[0];break;case "left":case "right":c.orientation.x=b[0]}else t=a.grep(b,function(r){return/^left|right$/.test(r)}),
c.orientation.x=t[0]||"auto",t=a.grep(b,function(r){return/^top|bottom$/.test(r)}),c.orientation.y=t[0]||"auto";c.defaultViewDate?(b=c.defaultViewDate.year||(new Date).getFullYear(),c.defaultViewDate=q(b,c.defaultViewDate.month||0,c.defaultViewDate.day||1)):c.defaultViewDate=p()},_events:[],_secondaryEvents:[],_applyEvents:function(b){for(var c=0,m,t,r;c<b.length;c++)m=b[c][0],2===b[c].length?(t=d,r=b[c][1]):3===b[c].length&&(t=b[c][1],r=b[c][2]),m.on(r,t)},_unapplyEvents:function(b){for(var c=0,
m,t,r;c<b.length;c++)m=b[c][0],2===b[c].length?(r=d,t=b[c][1]):3===b[c].length&&(r=b[c][1],t=b[c][2]),m.off(t,r)},_buildEvents:function(){var b={keyup:a.proxy(function(c){-1===a.inArray(c.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};!0===this.o.showOnFocus&&(b.focus=a.proxy(this.show,this));this._events=this.isInput?[[this.element,b]]:this.component&&this.hasInput?[[this.inputField,b],[this.component,{click:a.proxy(this.show,
this)}]]:[[this.element,{click:a.proxy(this.show,this),keydown:a.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(c){this._focused_from=c.target},this)}],[this.element,{blur:a.proxy(function(c){this._focused_from=c.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(c){this.update(c.date)},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,
this)}],[a(document),{mousedown:a.proxy(function(c){this.element.is(c.target)||this.element.find(c.target).length||this.picker.is(c.target)||this.picker.find(c.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},
_trigger:function(b,c){c=c||this.dates.get(-1);c=this._utc_to_local(c);this.element.trigger({type:b,date:c,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(m,t){0===arguments.length?(m=this.dates.length-1,t=this.o.format):"string"===typeof m&&(t=m,m=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(m);return f.formatDate(r,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||
this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();this.o.forceParse&&this.inputField.val()&&this.setValue();
this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(b){if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&-1!==a.inArray("text/plain",b.originalEvent.clipboardData.types))var c=b.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)c=window.clipboardData.getData("Text");
else return;this.setDate(c);this.update();b.preventDefault()},_utc_to_local:function(b){return b&&new Date(b.getTime()+6E4*b.getTimezoneOffset())},_local_to_utc:function(b){return b&&new Date(b.getTime()-6E4*b.getTimezoneOffset())},_zero_time:function(b){return b&&new Date(b.getFullYear(),b.getMonth(),b.getDate())},_zero_utc_time:function(b){return b&&new Date(Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,
function(b){return new Date(b)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var b=this.dates.get(-1);return"undefined"!==typeof b?new Date(b):null},clearDates:function(){this.inputField&&this.inputField.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var b=
a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local));this._trigger("changeDate");this.setValue();return this},setDate:x("setDates"),setUTCDate:x("setUTCDates"),remove:x("destroy"),setValue:function(){var b=this.getFormattedDate();this.inputField.val(b);return this},getFormattedDate:function(b){b===d&&(b=this.o.format);var c=this.o.language;return a.map(this.dates,function(m){return f.formatDate(m,b,c)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},
setStartDate:function(b){this._process_options({startDate:b});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(b){this._process_options({endDate:b});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(b){this._process_options({daysOfWeekDisabled:b});this.update();this.updateNavArrows();return this},setDaysOfWeekHighlighted:function(b){this._process_options({daysOfWeekHighlighted:b});this.update();return this},
setDatesDisabled:function(b){this._process_options({datesDisabled:b});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),m=a(this.o.container),t=m.width(),r="body"===this.o.container?a(document).scrollTop():m.scrollTop(),z=m.offset(),A=[];this.element.parents().each(function(){var K=a(this).css("z-index");"auto"!==K&&0!==K&&A.push(parseInt(K))});m=Math.max.apply(Math,A)+this.o.zIndexOffset;var C=this.component?
this.component.parent().offset():this.element.offset(),B=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),H=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),D=C.left-z.left;z=C.top-z.top;"body"!==this.o.container&&(z+=r);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&
(D-=b-H)):0>C.left?(this.picker.addClass("datepicker-orient-left"),D-=C.left-10):D+b>t?(this.picker.addClass("datepicker-orient-right"),D+=H-b):this.picker.addClass("datepicker-orient-left");b=this.o.orientation.y;"auto"===b&&(b=0>-r+z-c?"bottom":"top");this.picker.addClass("datepicker-orient-"+b);z="top"===b?z-(c+parseInt(this.picker.css("padding-top"))):z+B;this.o.rtl?this.picker.css({top:z,right:t-(D+H),zIndex:m}):this.picker.css({top:z,left:D,zIndex:m});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;
var b=this.dates.copy(),c=[],m=!1;arguments.length?(a.each(arguments,a.proxy(function(t,r){r instanceof Date&&(r=this._local_to_utc(r));c.push(r)},this)),m=!0):(c=(c=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date);c=a.map(c,a.proxy(function(t){return f.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));c=a.grep(c,a.proxy(function(t){return!this.dateWithinRange(t)||
!t},this),!0);this.dates.replace(c);this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate;m?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&b.length&&this._trigger("clearDate");this.fill();this.element.change();return this},fillDow:function(){var b=this.o.weekStart,c="\x3ctr\x3e";this.o.calendarWeeks&&
(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(m,t){return parseInt(t)+1}),c+='\x3cth class\x3d"cw"\x3e\x26#160;\x3c/th\x3e');for(;b<this.o.weekStart+7;)c+='\x3cth class\x3d"dow',-1<a.inArray(b,this.o.daysOfWeekDisabled)&&(c+=" disabled"),c+='"\x3e'+g[this.o.language].daysMin[b++%7]+"\x3c/th\x3e";c+="\x3c/tr\x3e";this.picker.find(".datepicker-days thead").append(c)},fillMonths:function(){for(var b=this._utc_to_local(this.viewDate),c="",m=0;12>m;){var t=b&&b.getMonth()===
m?" focused":"";c+='\x3cspan class\x3d"month'+t+'"\x3e'+g[this.o.language].monthsShort[m++]+"\x3c/span\x3e"}this.picker.find(".datepicker-months td").html(c)},setRange:function(b){b&&b.length?this.range=a.map(b,function(c){return c.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var c=[],m=this.viewDate.getUTCFullYear(),t=this.viewDate.getUTCMonth(),r=new Date;b.getUTCFullYear()<m||b.getUTCFullYear()===m&&b.getUTCMonth()<t?c.push("old"):(b.getUTCFullYear()>m||b.getUTCFullYear()===
m&&b.getUTCMonth()>t)&&c.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused");this.o.todayHighlight&&b.getUTCFullYear()===r.getFullYear()&&b.getUTCMonth()===r.getMonth()&&b.getUTCDate()===r.getDate()&&c.push("today");-1!==this.dates.contains(b)&&c.push("active");this.dateWithinRange(b)||c.push("disabled");this.dateIsDisabled(b)&&c.push("disabled","disabled-date");-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)&&c.push("highlighted");this.range&&(b>this.range[0]&&
b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected"),b.valueOf()===this.range[0]&&c.push("range-start"),b.valueOf()===this.range[this.range.length-1]&&c.push("range-end"));return c},_fill_yearsView:function(b,c,m,t,r,z,A,C){var B;var H="";b=this.picker.find(b);r=parseInt(r/m,10)*m;z=parseInt(z/t,10)*t;m=parseInt(A/t,10)*t;A=a.map(this.dates,function(N){return parseInt(N.getUTCFullYear()/t,10)*t});b.find(".datepicker-switch").text(r+"-"+(r+9*
t));r-=t;for(B=-1;11>B;B+=1){var D=[c];var K=null;-1===B?D.push("old"):10===B&&D.push("new");-1!==a.inArray(r,A)&&D.push("active");(r<z||r>m)&&D.push("disabled");r===this.viewDate.getFullYear()&&D.push("focused");if(C!==a.noop){var L=C(new Date(r,0,1));L===d?L={}:"boolean"===typeof L?L={enabled:L}:"string"===typeof L&&(L={classes:L});!1===L.enabled&&D.push("disabled");L.classes&&(D=D.concat(L.classes.split(/\s+/)));L.tooltip&&(K=L.tooltip)}H+='\x3cspan class\x3d"'+D.join(" ")+'"'+(K?' title\x3d"'+
K+'"':"")+"\x3e"+r+"\x3c/span\x3e";r+=t}b.find("td").html(H)},fill:function(){var b=new Date(this.viewDate),c=b.getUTCFullYear(),m=b.getUTCMonth(),t=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,r=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,z=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,A=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,C=g[this.o.language].today||g.en.today||"",B=g[this.o.language].clear||g.en.clear||
"",H=g[this.o.language].titleFormat||g.en.titleFormat;if(!isNaN(c)&&!isNaN(m)){this.picker.find(".datepicker-days .datepicker-switch").text(f.formatDate(b,H,this.o.language));this.picker.find("tfoot .today").text(C).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot .clear").text(B).toggle(!1!==this.o.clearBtn);this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title);this.updateNavArrows();this.fillMonths();b=q(c,m-1,28);m=f.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth());
b.setUTCDate(m);b.setUTCDate(m-(b.getUTCDay()-this.o.weekStart+7)%7);m=new Date(b);100>b.getUTCFullYear()&&m.setUTCFullYear(b.getUTCFullYear());m.setUTCDate(m.getUTCDate()+42);m=m.valueOf();for(C=[];b.valueOf()<m;){if(b.getUTCDay()===this.o.weekStart&&(C.push("\x3ctr\x3e"),this.o.calendarWeeks)){B=new Date(+b+(this.o.weekStart-b.getUTCDay()-7)%7*864E5);B=new Date(Number(B)+(11-B.getUTCDay())%7*864E5);var D=new Date(Number(D=q(B.getUTCFullYear(),0,1))+(11-D.getUTCDay())%7*864E5);C.push('\x3ctd class\x3d"cw"\x3e'+
((B-D)/864E5/7+1)+"\x3c/td\x3e")}H=this.getClassNames(b);H.push("day");if(this.o.beforeShowDay!==a.noop&&(B=this.o.beforeShowDay(this._utc_to_local(b)),B===d?B={}:"boolean"===typeof B?B={enabled:B}:"string"===typeof B&&(B={classes:B}),!1===B.enabled&&H.push("disabled"),B.classes&&(H=H.concat(B.classes.split(/\s+/))),B.tooltip))var K=B.tooltip;H=a.isFunction(a.uniqueSort)?a.uniqueSort(H):a.unique(H);C.push('\x3ctd class\x3d"'+H.join(" ")+'"'+(K?' title\x3d"'+K+'"':"")+"\x3e"+b.getUTCDate()+"\x3c/td\x3e");
K=null;b.getUTCDay()===this.o.weekEnd&&C.push("\x3c/tr\x3e");b.setUTCDate(b.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(C.join(""));K=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months";var L=this.picker.find(".datepicker-months").find(".datepicker-switch").text(2>this.o.maxViewMode?K:c).end().find("span").removeClass("active");a.each(this.dates,function(G,M){M.getUTCFullYear()===c&&L.eq(M.getUTCMonth()).addClass("active")});(c<t||c>z)&&L.addClass("disabled");
c===t&&L.slice(0,r).addClass("disabled");c===z&&L.slice(A+1).addClass("disabled");if(this.o.beforeShowMonth!==a.noop){var N=this;a.each(L,function(G,M){G=N.o.beforeShowMonth(new Date(c,G,1));G===d?G={}:"boolean"===typeof G?G={enabled:G}:"string"===typeof G&&(G={classes:G});!1!==G.enabled||a(M).hasClass("disabled")||a(M).addClass("disabled");G.classes&&a(M).addClass(G.classes);G.tooltip&&a(M).prop("title",G.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,c,t,z,this.o.beforeShowYear);
this._fill_yearsView(".datepicker-decades","decade",100,10,c,t,z,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1E3,100,c,t,z,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var b=new Date(this.viewDate),c=b.getUTCFullYear();b=b.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==this.o.startDate&&c<=this.o.startDate.getUTCFullYear()&&b<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});
Infinity!==this.o.endDate&&c>=this.o.endDate.getUTCFullYear()&&b>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:-Infinity!==this.o.startDate&&c<=this.o.startDate.getUTCFullYear()||2>this.o.maxViewMode?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.o.endDate&&c>=this.o.endDate.getUTCFullYear()||2>this.o.maxViewMode?
this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();b.stopPropagation();var c;b=a(b.target);b.hasClass("datepicker-switch")&&this.showMode(1);var m=b.closest(".prev, .next");0<m.length&&(m=f.modes[this.viewMode].navStep*(m.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,m),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,m),1===this.viewMode&&
this._trigger("changeYear",this.viewDate)),this.fill());b.hasClass("today")&&!b.hasClass("day")&&(this.showMode(-2),this._setDate(p(),"linked"===this.o.todayBtn?null:"view"));b.hasClass("clear")&&this.clearDates();if(!b.hasClass("disabled")){if(b.hasClass("day")){m=parseInt(b.text(),10)||1;var t=this.viewDate.getUTCFullYear();var r=this.viewDate.getUTCMonth();if(b.hasClass("old"))if(0===r){r=11;--t;var z=c=!0}else--r,c=!0;b.hasClass("new")&&(11===r?(r=0,t+=1,z=c=!0):(r+=1,c=!0));this._setDate(q(t,
r,m));z&&this._trigger("changeYear",this.viewDate);c&&this._trigger("changeMonth",this.viewDate)}b.hasClass("month")&&(this.viewDate.setUTCDate(1),m=1,r=b.parent().find("span").index(b),t=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(q(t,r,m)),this.showMode()):this.showMode(-1),this.fill());if(b.hasClass("year")||b.hasClass("decade")||b.hasClass("century"))this.viewDate.setUTCDate(1),m=1,r=0,t=parseInt(b.text(),
10)||0,this.viewDate.setUTCFullYear(t),b.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(q(t,r,m))),b.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(q(t,r,m))),b.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(q(t,r,m))),this.showMode(-1),this.fill()}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus();delete this._focused_from},
_toggle_multidate:function(b){var c=this.dates.contains(b);b||this.dates.clear();-1!==c?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(c):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(b));if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(b,c){c&&"date"!==c||this._toggle_multidate(b&&new Date(b));c&&"view"!==c||(this.viewDate=b&&new Date(b));this.fill();this.setValue();c&&"view"===
c||this._trigger("changeDate");this.inputField&&this.inputField.change();!this.o.autoclose||c&&"date"!==c||this.hide()},moveDay:function(b,c){var m=new Date(b);m.setUTCDate(b.getUTCDate()+c);return m},moveWeek:function(b,c){return this.moveDay(b,7*c)},moveMonth:function(b,c){if(!b||isNaN(b.getTime()))return this.o.defaultViewDate;if(!c)return b;var m=new Date(b.valueOf());b=m.getUTCDate();var t=m.getUTCMonth(),r=Math.abs(c);c=0<c?1:-1;if(1===r){r=-1===c?function(){return m.getUTCMonth()===t}:function(){return m.getUTCMonth()!==
z};var z=t+c;m.setUTCMonth(z);if(0>z||11<z)z=(z+12)%12}else{for(var A=0;A<r;A++)m=this.moveMonth(m,c);z=m.getUTCMonth();m.setUTCDate(b);r=function(){return z!==m.getUTCMonth()}}for(;r();)m.setUTCDate(--b),m.setUTCMonth(z);return m},moveYear:function(b,c){return this.moveMonth(b,12*c)},moveAvailableDate:function(b,c,m){do{b=this[m](b,c);if(!this.dateWithinRange(b))return!1;m="moveDay"}while(this.dateIsDisabled(b));return b},weekOfDateIsDisabled:function(b){return-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)},
dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||0<a.grep(this.o.datesDisabled,function(c){return b.getUTCFullYear()===c.getUTCFullYear()&&b.getUTCMonth()===c.getUTCMonth()&&b.getUTCDate()===c.getUTCDate()}).length},dateWithinRange:function(b){return b>=this.o.startDate&&b<=this.o.endDate},keydown:function(b){if(this.picker.is(":visible")){var c=!1,m,t=this.focusDate||this.viewDate;switch(b.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,
this.fill()):this.hide();b.preventDefault();b.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;var r=37===b.keyCode||38===b.keyCode?-1:1;if(0===this.viewMode)b.ctrlKey?(m=this.moveAvailableDate(t,r,"moveYear"))&&this._trigger("changeYear",this.viewDate):b.shiftKey?(m=this.moveAvailableDate(t,r,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===b.keyCode||39===b.keyCode?m=this.moveAvailableDate(t,r,"moveDay"):
this.weekOfDateIsDisabled(t)||(m=this.moveAvailableDate(t,r,"moveWeek"));else if(1===this.viewMode){if(38===b.keyCode||40===b.keyCode)r*=4;m=this.moveAvailableDate(t,r,"moveMonth")}else if(2===this.viewMode){if(38===b.keyCode||40===b.keyCode)r*=4;m=this.moveAvailableDate(t,r,"moveYear")}m&&(this.focusDate=this.viewDate=m,this.setValue(),this.fill(),b.preventDefault());break;case 13:if(!this.o.forceParse)break;t=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(t),
c=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(b.preventDefault(),b.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}c&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())}else if(40===b.keyCode||27===b.keyCode)this.show(),b.stopPropagation()},showMode:function(b){b&&
(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+b)));this.picker.children("div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).show();this.updateNavArrows()}};var k=function(b,c){a(b).data("datepicker",this);this.element=a(b);this.inputs=a.map(c.inputs,function(m){return m.jquery?m[0]:m});delete c.inputs;w.call(a(this.inputs),c).on("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(m){return a(m).data("datepicker")});
this.updateDates()};k.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(b){return b.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(c){return c.valueOf()});a.each(this.pickers,function(c,m){m.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker");if("undefined"!==typeof c){var m=c.getUTCDate();b=a.inArray(b.target,this.inputs);c=b-1;var t=b+1,r=this.inputs.length;if(-1!==b){a.each(this.pickers,
function(z,A){A.getUTCDate()||A.setUTCDate(m)});if(m<this.dates[c])for(;0<=c&&m<this.dates[c];)this.pickers[c--].setUTCDate(m);else if(m>this.dates[t])for(;t<r&&m>this.dates[t];)this.pickers[t++].setUTCDate(m);this.updateDates();delete this.updating}}}},remove:function(){a.map(this.pickers,function(b){b.remove()});delete this.element.data().datepicker}};var n=a.fn.datepicker,w=function(b){var c=Array.apply(null,arguments);c.shift();var m;this.each(function(){var t=a(this),r=t.data("datepicker"),z=
"object"===typeof b&&b;if(!r){r=v(this,"date");var A=a.extend({},e,r,z);A=y(A.language);z=a.extend({},e,A,r,z);t.hasClass("input-daterange")||z.inputs?(a.extend(z,{inputs:z.inputs||t.find("input").toArray()}),r=new k(this,z)):r=new l(this,z);t.data("datepicker",r)}"string"===typeof b&&"function"===typeof r[b]&&(m=r[b].apply(r,c))});if(m===d||m instanceof l||m instanceof k)return this;if(1<this.length)throw Error("Using only allowed for the collection of a single element ("+b+" function)");return m};
a.fn.datepicker=w;var e=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,
startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"\x26laquo;",rightArrow:"\x26raquo;"}},h=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=l;var g=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),daysMin:"Su Mo Tu We Th Fr Sa".split(" "),
months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},f={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1E3}],isLeapYear:function(b){return 0===
b%4&&0!==b%100||0===b%400},getDaysInMonth:function(b,c){return[31,f.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(b){if("function"===typeof b.toValue&&"function"===typeof b.toDisplay)return b;var c=b.replace(this.validParts,"\x00").split("\x00");b=b.match(this.validParts);if(!c||!c.length||!b||0===b.length)throw Error("Invalid date format.");return{separators:c,parts:b}},
parseDate:function(b,c,m,t){function r(G,M){!0===M&&(M=10);100>G&&(G+=2E3,G>(new Date).getFullYear()+M&&(G-=100));return G}function z(){var G=this.slice(0,C[D].length),M=C[D].slice(0,G.length);return G.toLowerCase()===M.toLowerCase()}if(!b)return d;if(b instanceof Date)return b;"string"===typeof c&&(c=f.parseFormat(c));if(c.toValue)return c.toValue(b,c,m);var A=/([\-+]\d+)([dmwy])/,C=b.match(/([\-+]\d+)([dmwy])/g),B={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},H={yesterday:"-1d",today:"+0d",
tomorrow:"+1d"},D;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b)){b=new Date;for(D=0;D<C.length;D++)c=A.exec(C[D]),m=parseInt(c[1]),c=B[c[2]],b=l.prototype[c](b,m);return q(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate())}if("undefined"!==typeof H[b]&&(b=H[b],C=b.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b))){b=new Date;for(D=0;D<C.length;D++)c=A.exec(C[D]),m=parseInt(c[1]),c=B[c[2]],b=l.prototype[c](b,m);return q(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate())}C=
b&&b.match(this.nonpunctuation)||[];b=new Date;A={};var K="yyyy yy M MM m mm d dd".split(" ");B={yyyy:function(G,M){return G.setUTCFullYear(t?r(M,t):M)},yy:function(G,M){return G.setUTCFullYear(t?r(M,t):M)},m:function(G,M){if(isNaN(G))return G;for(--M;0>M;)M+=12;M%=12;for(G.setUTCMonth(M);G.getUTCMonth()!==M;)G.setUTCDate(G.getUTCDate()-1);return G},d:function(G,M){return G.setUTCDate(M)}};B.M=B.MM=B.mm=B.m;B.dd=B.d;b=p();H=c.parts.slice();C.length!==H.length&&(H=a(H).filter(function(G,M){return-1!==
a.inArray(M,K)}).toArray());if(C.length===H.length){var L;D=0;for(L=H.length;D<L;D++){var N=parseInt(C[D],10);c=H[D];if(isNaN(N))switch(c){case "MM":N=a(g[m].months).filter(z);N=a.inArray(N[0],g[m].months)+1;break;case "M":N=a(g[m].monthsShort).filter(z),N=a.inArray(N[0],g[m].monthsShort)+1}A[c]=N}for(D=0;D<K.length;D++)c=K[D],c in A&&!isNaN(A[c])&&(m=new Date(b),B[c](m,A[c]),isNaN(m)||(b=m))}return b},formatDate:function(b,c,m){if(!b)return"";"string"===typeof c&&(c=f.parseFormat(c));if(c.toDisplay)return c.toDisplay(b,
c,m);m={d:b.getUTCDate(),D:g[m].daysShort[b.getUTCDay()],DD:g[m].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:g[m].monthsShort[b.getUTCMonth()],MM:g[m].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};m.dd=(10>m.d?"0":"")+m.d;m.mm=(10>m.m?"0":"")+m.m;b=[];for(var t=a.extend([],c.separators),r=0,z=c.parts.length;r<=z;r++)t.length&&b.push(t.shift()),b.push(m[c.parts[r]]);return b.join("")},headTemplate:'\x3cthead\x3e\x3ctr\x3e\x3cth colspan\x3d"7" class\x3d"datepicker-title"\x3e\x3c/th\x3e\x3c/tr\x3e\x3ctr\x3e\x3cth class\x3d"prev"\x3e\x26laquo;\x3c/th\x3e\x3cth colspan\x3d"5" class\x3d"datepicker-switch"\x3e\x3c/th\x3e\x3cth class\x3d"next"\x3e\x26raquo;\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e',
contTemplate:'\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d"7"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e',footTemplate:'\x3ctfoot\x3e\x3ctr\x3e\x3cth colspan\x3d"7" class\x3d"today"\x3e\x3c/th\x3e\x3c/tr\x3e\x3ctr\x3e\x3cth colspan\x3d"7" class\x3d"clear"\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/tfoot\x3e'};f.template='\x3cdiv class\x3d"datepicker"\x3e\x3cdiv class\x3d"datepicker-days"\x3e\x3ctable class\x3d"table-condensed"\x3e'+f.headTemplate+"\x3ctbody\x3e\x3c/tbody\x3e"+f.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datepicker-months"\x3e\x3ctable class\x3d"table-condensed"\x3e'+
f.headTemplate+f.contTemplate+f.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datepicker-years"\x3e\x3ctable class\x3d"table-condensed"\x3e'+f.headTemplate+f.contTemplate+f.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datepicker-decades"\x3e\x3ctable class\x3d"table-condensed"\x3e'+f.headTemplate+f.contTemplate+f.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datepicker-centuries"\x3e\x3ctable class\x3d"table-condensed"\x3e'+f.headTemplate+f.contTemplate+f.footTemplate+
"\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e";a.fn.datepicker.DPGlobal=f;a.fn.datepicker.noConflict=function(){a.fn.datepicker=n;return this};a.fn.datepicker.version="1.6.4";a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide\x3d"datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),w.call(c,"show"))});a(function(){w.call(a('[data-provide\x3d"datepicker-inline"]'))})});
(function(a,d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?module.exports=d(require("jquery")):a.lightbox=d(a.jQuery)})(this,function(a){function d(q){this.album=[];this.currentImageIndex=void 0;this.init();this.options=a.extend({},this.constructor.defaults);this.option(q)}d.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,
wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1};d.prototype.option=function(q){a.extend(this.options,q)};d.prototype.imageCountLabel=function(q,p){return this.options.albumLabel.replace(/%1/g,q).replace(/%2/g,p)};d.prototype.init=function(){var q=this;a(document).ready(function(){q.enable();q.build()})};d.prototype.enable=function(){var q=this;a("body").on("click","a[rel^\x3dlightbox], area[rel^\x3dlightbox], a[data-lightbox], area[data-lightbox]",function(p){q.start(a(p.currentTarget));return!1})};
d.prototype.build=function(){if(!(0<a("#lightbox").length)){var q=this;a('\x3cdiv id\x3d"lightboxOverlay" tabindex\x3d"-1" class\x3d"lightboxOverlay"\x3e\x3c/div\x3e\x3cdiv id\x3d"lightbox" tabindex\x3d"-1" class\x3d"lightbox"\x3e\x3cdiv class\x3d"lb-outerContainer"\x3e\x3cdiv class\x3d"lb-container"\x3e\x3cimg class\x3d"lb-image" src\x3d"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d" alt\x3d""/\x3e\x3cdiv class\x3d"lb-nav"\x3e\x3ca class\x3d"lb-prev" aria-label\x3d"Previous image" href\x3d"" \x3e\x3c/a\x3e\x3ca class\x3d"lb-next" aria-label\x3d"Next image" href\x3d"" \x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"lb-loader"\x3e\x3ca class\x3d"lb-cancel"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"lb-dataContainer"\x3e\x3cdiv class\x3d"lb-data"\x3e\x3cdiv class\x3d"lb-details"\x3e\x3cspan class\x3d"lb-caption"\x3e\x3c/span\x3e\x3cspan class\x3d"lb-number"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"lb-closeContainer"\x3e\x3ca class\x3d"lb-close"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e').appendTo(a("body"));
this.$lightbox=a("#lightbox");this.$overlay=a("#lightboxOverlay");this.$outerContainer=this.$lightbox.find(".lb-outerContainer");this.$container=this.$lightbox.find(".lb-container");this.$image=this.$lightbox.find(".lb-image");this.$nav=this.$lightbox.find(".lb-nav");this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),
10)};this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)};this.$overlay.hide().on("click",function(){q.end();return!1});this.$lightbox.hide().on("click",function(p){"lightbox"===a(p.target).attr("id")&&q.end()});this.$outerContainer.on("click",function(p){"lightbox"===a(p.target).attr("id")&&q.end();return!1});
this.$lightbox.find(".lb-prev").on("click",function(){0===q.currentImageIndex?q.changeImage(q.album.length-1):q.changeImage(q.currentImageIndex-1);return!1});this.$lightbox.find(".lb-next").on("click",function(){q.currentImageIndex===q.album.length-1?q.changeImage(0):q.changeImage(q.currentImageIndex+1);return!1});this.$nav.on("mousedown",function(p){3===p.which&&(q.$nav.css("pointer-events","none"),q.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(q),
0)}))});this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){q.end();return!1})}};d.prototype.start=function(q){function p(k){x.album.push({alt:k.attr("data-alt"),link:k.attr("href"),title:k.attr("data-title")||k.attr("title")})}var x=this,v=a(window);v.on("resize",a.proxy(this.sizeOverlay,this));this.sizeOverlay();this.album=[];var y=0,u=q.attr("data-lightbox");if(u){u=a(q.prop("tagName")+'[data-lightbox\x3d"'+u+'"]');for(var l=0;l<u.length;l=++l)p(a(u[l])),u[l]===q[0]&&(y=l)}else if("lightbox"===
q.attr("rel"))p(q);else for(u=a(q.prop("tagName")+'[rel\x3d"'+q.attr("rel")+'"]'),l=0;l<u.length;l=++l)p(a(u[l])),u[l]===q[0]&&(y=l);q=v.scrollTop()+this.options.positionFromTop;v=v.scrollLeft();this.$lightbox.css({top:q+"px",left:v+"px"}).fadeIn(this.options.fadeDuration);this.options.disableScrolling&&a("body").addClass("lb-disable-scrolling");this.changeImage(y)};d.prototype.changeImage=function(q){var p=this,x=this.album[q].link,v=x.split(".").slice(-1)[0],y=this.$lightbox.find(".lb-image");this.disableKeyboardNav();
this.$overlay.fadeIn(this.options.fadeDuration);a(".lb-loader").fadeIn("slow");this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();this.$outerContainer.addClass("animating");var u=new Image;u.onload=function(){y.attr({alt:p.album[q].alt,src:x});a(u);y.width(u.width);y.height(u.height);var l=a(window).width();var k=a(window).height();l=l-p.containerPadding.left-p.containerPadding.right-p.imageBorderWidth.left-p.imageBorderWidth.right-20;
k=k-p.containerPadding.top-p.containerPadding.bottom-p.imageBorderWidth.top-p.imageBorderWidth.bottom-p.options.positionFromTop-70;"svg"===v&&(y.width(l),y.height(k));p.options.fitImagesInViewport?(p.options.maxWidth&&p.options.maxWidth<l&&(l=p.options.maxWidth),p.options.maxHeight&&p.options.maxHeight<k&&(k=p.options.maxHeight)):(l=p.options.maxWidth||u.width||l,k=p.options.maxHeight||u.height||k);if(u.width>l||u.height>k)u.width/l>u.height/k?(k=l,l=parseInt(u.height/(u.width/k),10)):(l=k,k=parseInt(u.width/
(u.height/l),10)),y.width(k),y.height(l);p.sizeContainer(y.width(),y.height())};u.src=this.album[q].link;this.currentImageIndex=q};d.prototype.sizeOverlay=function(){var q=this;setTimeout(function(){q.$overlay.width(a(document).width()).height(a(document).height())},0)};d.prototype.sizeContainer=function(q,p){function x(){v.$lightbox.find(".lb-dataContainer").width(l);v.$lightbox.find(".lb-prevLink").height(k);v.$lightbox.find(".lb-nextLink").height(k);v.$overlay.focus();v.showImage()}var v=this,
y=this.$outerContainer.outerWidth(),u=this.$outerContainer.outerHeight(),l=q+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,k=p+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;y!==l||u!==k?this.$outerContainer.animate({width:l,height:k},this.options.resizeDuration,"swing",function(){x()}):x()};d.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide();
this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration);this.updateNav();this.updateDetails();this.preloadNeighboringImages();this.enableKeyboardNav()};d.prototype.updateNav=function(){var q=!1;try{document.createEvent("TouchEvent"),q=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(p){}this.$lightbox.find(".lb-nav").show();1<this.album.length&&(this.options.wrapAround?(q&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):
(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),q&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),q&&this.$lightbox.find(".lb-next").css("opacity","1"))))};d.prototype.updateDetails=function(){var q=this;if("undefined"!==typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var p=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?p.text(this.album[this.currentImageIndex].title):
p.html(this.album[this.currentImageIndex].title);p.fadeIn("fast")}1<this.album.length&&this.options.showImageNumberLabel?(p=this.imageCountLabel(this.currentImageIndex+1,this.album.length),this.$lightbox.find(".lb-number").text(p).fadeIn("fast")):this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating");this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return q.sizeOverlay()})};d.prototype.preloadNeighboringImages=function(){this.album.length>
this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)};d.prototype.enableKeyboardNav=function(){this.$lightbox.on("keyup.keyboard",a.proxy(this.keyboardAction,this));this.$overlay.on("keyup.keyboard",a.proxy(this.keyboardAction,this))};d.prototype.disableKeyboardNav=function(){this.$lightbox.off(".keyboard");this.$overlay.off(".keyboard")};d.prototype.keyboardAction=function(q){var p=
q.keyCode;27===p?(q.stopPropagation(),this.end()):37===p?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):39===p&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))};d.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);this.$lightbox.fadeOut(this.options.fadeDuration);
this.$overlay.fadeOut(this.options.fadeDuration);this.options.disableScrolling&&a("body").removeClass("lb-disable-scrolling")};return new d});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){function d(e,h){var g=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,g)},h)}function q(e,h){h=h||100;return function(){if(!e.debouncing){var g=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,g);e.debouncing=!0}clearTimeout(e.debounceTimeout);e.debounceTimeout=setTimeout(function(){e.debouncing=
!1},h);return e.lastReturnVal}}function p(e){var h=[];for(e=e.parentNode;e&&(0===e.offsetWidth||0===e.offsetHeight||!1===e.open);)h.push(e),e=e.parentNode;return h}function x(e,h){function g(t){"undefined"!==typeof t.open&&(t.open=t.open?!1:!0)}var f=p(e),b=f.length,c=[],m=e[h];if(b){for(m=0;m<b;m++)c[m]=f[m].style.cssText,f[m].style.setProperty?f[m].style.setProperty("display","block","important"):f[m].style.cssText+=";display: block !important",f[m].style.height="0",f[m].style.overflow="hidden",
f[m].style.visibility="hidden",g(f[m]);m=e[h];for(e=0;e<b;e++)f[e].style.cssText=c[e],g(f[e])}return m}function v(e,h){e=parseFloat(e);return Number.isNaN(e)?h:e}function y(e){return e.charAt(0).toUpperCase()+e.substr(1)}function u(e,h){this.$window=a(window);this.$document=a(document);this.$element=a(e);this.options=a.extend({},n,h);this.polyfill=this.options.polyfill;this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation;this.onInit=this.options.onInit;this.onSlide=
this.options.onSlide;this.onSlideEnd=this.options.onSlideEnd;this.DIMENSION=w.orientation[this.orientation].dimension;this.DIRECTION=w.orientation[this.orientation].direction;this.DIRECTION_STYLE=w.orientation[this.orientation].directionStyle;this.COORDINATE=w.orientation[this.orientation].coordinate;if(this.polyfill&&k)return!1;this.identifier="js-rangeslider-"+l++;this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier;this.moveEvent=this.options.moveEvent.join("."+
this.identifier+" ")+"."+this.identifier;this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier;this.toFixed=(this.step+"").replace(".","").length-1;this.$fill=a('\x3cdiv class\x3d"'+this.options.fillClass+'" /\x3e');this.$handle=a('\x3cdiv class\x3d"'+this.options.handleClass+'" /\x3e');this.$range=a('\x3cdiv class\x3d"'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id\x3d"'+this.identifier+'" /\x3e').insertAfter(this.$element).prepend(this.$fill,
this.$handle);this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"});this.handleDown=a.proxy(this.handleDown,this);this.handleMove=a.proxy(this.handleMove,this);this.handleEnd=a.proxy(this.handleEnd,this);this.init();var g=this;this.$window.on("resize."+this.identifier,q(function(){d(function(){g.update(!1,!1)},300)},20));this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown);this.$element.on("change."+
this.identifier,function(f,b){b&&b.origin===g.identifier||(f=g.getPositionFromValue(f.target.value),g.setPosition(f))})}Number.isNaN=Number.isNaN||function(e){return"number"===typeof e&&e!==e};var l=0,k=function(){var e=document.createElement("input");e.setAttribute("type","range");return"text"!==e.type}(),n={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",
fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},w={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};u.prototype.init=function(){this.update(!0,!1);if(this.onInit&&"function"===typeof this.onInit)this.onInit()};
u.prototype.update=function(e,h){e&&(this.min=v(this.$element[0].getAttribute("min"),0),this.max=v(this.$element[0].getAttribute("max"),100),this.value=v(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=v(this.$element[0].getAttribute("step"),1));this.handleDimension=x(this.$handle[0],"offset"+y(this.DIMENSION));this.rangeDimension=x(this.$range[0],"offset"+y(this.DIMENSION));this.maxHandlePos=this.rangeDimension-this.handleDimension;this.grabPos=this.handleDimension/2;
this.position=this.getPositionFromValue(this.value);this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass);this.setPosition(this.position,h)};u.prototype.handleDown=function(e){e.preventDefault();if(!e.button||0===e.button)if(this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),!(-1<(" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))){e=
this.getRelativePosition(e);var h=this.$range[0].getBoundingClientRect()[this.DIRECTION];h=this.getPositionFromNode(this.$handle[0])-h;this.setPosition("vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos);e>=h&&e<h+this.handleDimension&&(this.grabPos=e-h)}};u.prototype.handleMove=function(e){e.preventDefault();e=this.getRelativePosition(e);this.setPosition("vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos)};u.prototype.handleEnd=function(e){e.preventDefault();
this.$document.off(this.moveEvent,this.handleMove);this.$document.off(this.endEvent,this.handleEnd);this.$range.removeClass(this.options.activeClass);this.$element.trigger("change",{origin:this.identifier});if(this.onSlideEnd&&"function"===typeof this.onSlideEnd)this.onSlideEnd(this.position,this.value)};u.prototype.cap=function(e,h,g){return e<h?h:e>g?g:e};u.prototype.setPosition=function(e,h){void 0===h&&(h=!0);e=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos));var g=this.getPositionFromValue(e);
this.$fill[0].style[this.DIMENSION]=g+this.grabPos+"px";this.$handle[0].style[this.DIRECTION_STYLE]=g+"px";this.setValue(e);this.position=g;this.value=e;if(h&&this.onSlide&&"function"===typeof this.onSlide)this.onSlide(g,e)};u.prototype.getPositionFromNode=function(e){for(var h=0;null!==e;)h+=e.offsetLeft,e=e.offsetParent;return h};u.prototype.getRelativePosition=function(e){var h=y(this.COORDINATE),g=this.$range[0].getBoundingClientRect()[this.DIRECTION],f=0;"undefined"!==typeof e.originalEvent["client"+
h]?f=e.originalEvent["client"+h]:e.originalEvent.touches&&e.originalEvent.touches[0]&&"undefined"!==typeof e.originalEvent.touches[0]["client"+h]?f=e.originalEvent.touches[0]["client"+h]:e.currentPoint&&"undefined"!==typeof e.currentPoint[this.COORDINATE]&&(f=e.currentPoint[this.COORDINATE]);return f-g};u.prototype.getPositionFromValue=function(e){e=(e-this.min)/(this.max-this.min);return Number.isNaN(e)?0:e*this.maxHandlePos};u.prototype.getValueFromPosition=function(e){return Number((this.step*
Math.round(e/(this.maxHandlePos||1)*(this.max-this.min)/this.step)+this.min).toFixed(this.toFixed))};u.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})};u.prototype.destroy=function(){this.$document.off("."+this.identifier);this.$window.off("."+this.identifier);this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_rangeslider");this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])};
a.fn.rangeslider=function(e){var h=Array.prototype.slice.call(arguments,1);return this.each(function(){var g=a(this),f=g.data("plugin_rangeslider");f||g.data("plugin_rangeslider",f=new u(this,e));"string"===typeof e&&f[e].apply(f,h)})};return"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"});window.console||(console={});console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};
console.info=console.info||function(){};window.jsErrors=[];window.onerror=function(a,d,q,p,x){a="Error: "+a+" Script: "+d+" Line: "+q+" Column: "+p+" StackTrace: "+x+" User-Agent: "+navigator.userAgent+" URL: "+d+" Page: "+window.location.href;window.jsErrors[window.jsErrors.length]=a;try{ga("send","exception",{exDescription:a,exFatal:!1})}catch(v){}};"function"!==typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return a&&this.substr(0,a.length)===a});
"function"!==typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return $.trim(this)});function createCookie(a,d,q){if(q){var p=new Date;p.setTime(p.getTime()+864E5*q);q="; expires\x3d"+p.toGMTString()}else q="";document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(d)+q+"; path\x3d/"}
function readCookie(a){a=encodeURIComponent(a)+"\x3d";for(var d=document.cookie.split(";"),q=0;q<d.length;q++){for(var p=d[q];" "===p.charAt(0);)p=p.substring(1,p.length);if(0===p.indexOf(a))return decodeURIComponent(p.substring(a.length,p.length))}return null}function eraseCookie(a){createCookie(a,"",-1)}var addAssetRowsLinkHTML=' \x3cspan class\x3d"add-rows hidden-print"\x3e(\x3ca href\x3d"javascript:void(0);" onclick\x3d"return addAssetRows(10, getParentPortfolio(this), null, true);"\x3eAdd More\x3c/a\x3e)\x3c/span\x3e';
"undefined"!==typeof addRowsLinkText&&(addAssetRowsLinkHTML=addAssetRowsLinkHTML.replace("Add More",addRowsLinkText));
var htmlEntityMap={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"},highchartsTheme={chart:{style:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',color:"#333333"}},credits:{enabled:!1},lang:{thousandsSep:","},title:{style:{fontWeight:"bold",color:"#333333"}},subtitle:{style:{fontWeight:"normal",color:"#333333"}},legend:{itemStyle:{fontWeight:"normal",color:"#333333"}},tooltip:{shared:!0,dateTimeLabelFormats:{second:"%Y-%m-%d\x3cbr/\x3e%H:%M:%S",
minute:"%Y-%m-%d\x3cbr/\x3e%H:%M",hour:"%Y-%m-%d\x3cbr/\x3e%H:%M",day:"%b %e, %Y",week:"%m/%d/%Y",month:"%b %Y",year:"%Y"}},colors:"#3366CC #DC3912 #FF9900 #109618 #990099 #0099C6 #DD4477 #66AA00 #B82E2E #316395 #994499 #22AA99 #AAAA11 #6633CC #E67300 #8B0707 #651067 #329262 #5574A6 #3B3EAC".split(" "),xAxis:{labels:{style:{color:"#333333"}},title:{style:{color:"#333333"}},dateTimeLabelFormats:{second:"%Y-%m-%d\x3cbr/\x3e%H:%M:%S",minute:"%Y-%m-%d\x3cbr/\x3e%H:%M",hour:"%Y-%m-%d\x3cbr/\x3e%H:%M",
day:"%m/%d/%Y",week:"%m/%d/%Y",month:"%b %Y",year:"%Y"}},yAxis:{reversedStacks:!1,labels:{style:{color:"#333333"}},title:{style:{color:"#333333"}}},plotOptions:{pie:{allowPointSelect:!1,cursor:"pointer",tooltip:{headerFormat:'\x3cspan style\x3d"font-size: 10px"\x3e\x3cb\x3e{point.key}\x3c/b\x3e\x3c/span\x3e\x3cbr/\x3e',pointFormat:"{series.name}: {point.percentage:.2f}%"},legend:{layout:"bottom",align:"center"},dataLabels:{enabled:!0,format:"{point.percentage:.0f} %",filter:{property:"percentage",
operator:"\x3e",value:8},distance:-20,allowOverlap:!0,crop:!1,style:{fontSize:"9px",fontWeight:"normal",textShadow:!1,textOutline:null}},point:{events:{legendItemClick:function(){return!1}}},showInLegend:!0},line:{events:{legendItemClick:function(){return!1}},marker:{enabled:!1}},column:{events:{legendItemClick:function(){return!1}}},bar:{events:{legendItemClick:function(){return!1}}},area:{events:{legendItemClick:function(){return!1}},marker:{enabled:!1}},series:{animation:!1,fillOpacity:.3,states:{inactive:{opacity:1}}}}};
$.fn.exists=function(){return 0!==this.length};function escapeHTML(a){return String(a).replace(/[&<>"'\/]/g,function(d){return htmlEntityMap[d]})}
var isIpad=navigator.userAgent&&navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,isWindowsTouchDevice=("ontouchstart"in window||navigator.msMaxTouchPoints||navigator.maxTouchPoints)&&navigator.userAgent&&0<=navigator.userAgent.search(/Windows/),selectedSymbolField=null,saveIndex=0,savePrefix=null,useChosen=!(isIpad||isWindowsTouchDevice)&&navigator.userAgent&&0>navigator.userAgent.search(/iPad|iPhone|Android|SeleniumWebDriver/),useMasks=navigator.userAgent&&
0>navigator.userAgent.search(/SeleniumWebDriver/),pendingExportType="pdf",pendingExportToken=null,pendingExportTimer=null,pendingExportTimerAttempts=0,reportSectionsPopulated=!1,maxChartsPerPage=15;"undefined"!==typeof extraChartsCount&&(maxChartsPerPage+=extraChartsCount);function isDoubleClick(a){a instanceof jQuery||(a=$(a));if(a.data("justClicked"))return!0;a.data("justClicked",!0);setTimeout(function(){a.removeData("justClicked")},2500);return!1}
function postPageInit(){showBookmarkLink&&$("span.directLink").html('\x3ca href\x3d"#"\x3e\x3cspan class\x3d"fa fa-external-link"\x3e\x3c/span\x3e\x3c/a\x3e \x3ca href\x3d"#"\x3eLink\x3c/a\x3e').find("a").attr("href",bookmarkURL);if(showExportLinks)if($("span.directPrint").html('\x3ca class\x3d"pdfDownload" href\x3d"javascript:void(0)"\x3e\x3cspan class\x3d"fa fa-file-pdf-o"\x3e\x3c/span\x3e PDF\x3c/a\x3e'),$("span.directExport").html('\x3ca class\x3d"downloadLink" href\x3d"javascript:void(0)" \x3e\x3cspan class\x3d"fa fa-file-excel-o"\x3e\x3c/span\x3e Excel\x3c/a\x3e'),
enableExport){var a=$("span.directPrint").hasClass("customPrint");$("a.pdfDownload,a.downloadLink").click(function(p){p=$(p.target);isDoubleClick(p)||(p=p.closest("a").hasClass("pdfDownload"),exportResults(p?"pdf":"csv",a));return!1});for(var d=1;3>=d;d++){var q=null;"undefined"!==typeof portfolioNames&&(q=portfolioNames.length>=d?portfolioNames[d-1]:null);q?$("#reportPortfolio"+d).val(q):$("#reportPortfolio"+d).closest(".form-group").hide()}$("#exportReportButton").on("click",function(p){if(!isDoubleClick($(p.target))){$("#reportDialog").modal("hide");
var x=$("form:first");$("#reportConfigForm").find("input,select,textarea").each(function(){var v=$(this),y=v.attr("name");v=v.val();setHiddenElement(x,y,v)});exportResults(pendingExportType,!1)}})}else $("a.pdfDownload,a.downloadLink").on("click",function(p){showLoginPrompt(!1);return!1})}function generateToken(){return(new Date).getTime()+"_"+Math.random().toString(36).substr(2,9)}
function exportResults(a,d){pendingExportType=a;pendingExportToken=generateToken();d&&"pdf"===a?(toggleReportSections(),$("#reportDialog").modal()):(d=$("form:first"),setHiddenElement(d,"export",a),setHiddenElement(d,"exportToken",pendingExportToken),setHiddenElement(d,"exportSections",getSelectedReportSections()),"pdf"===a&&(pendingExportTimerAttempts=40,$("#waitDialog").modal(),pendingExportTimer=window.setInterval(function(){if(readCookie("fileExportToken")===pendingExportToken||0>=pendingExportTimerAttempts)window.clearInterval(pendingExportTimer),
eraseCookie("fileExportToken"),$("#waitDialog").modal("hide");pendingExportTimerAttempts--},750)),d.data("submitted",!1),$("\x3cinput\x3e",{type:"submit",style:"display:none"}).appendTo(d).click().remove(),setTimeout(function(){$("#export").val("");$("form:first").data("submitted",!1)},10));return!1}function setHiddenElement(a,d,q){if(d){var p=a.find("input[name\x3d"+d+"]");p.length?p.val(q):$("\x3cinput\x3e",{type:"hidden",id:d,name:d,value:q}).appendTo(a)}}
function initColorPickers(){$(".color-picker").spectrum({showInput:!0,showAlpha:!1,preferredFormat:"hex",showPalette:!0,palette:["#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc".split(" "),"#ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd".split(" "),"#e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0".split(" "),"#c00 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79".split(" "),
"#900 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47".split(" "),"#600 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")],change:function(a){var d=this.id.substring(0,this.id.indexOf("_"));$("#"+d).val(a.toHexString().toUpperCase())}}).on("show.spectrum hide.spectrum",function(a,d){d&&(a=this.id.substring(0,this.id.indexOf("_")),$("#"+a).val(d.toHexString().toUpperCase()))})}
function preventMouseWheelSpinner(){$("input[type\x3dnumber]").on("focus",function(a){$(this).on("mousewheel.disableScroll",function(d){d.preventDefault()})});$("input[type\x3dnumber]").on("blur",function(a){$(this).off("mousewheel.disableScroll")})}
$(function(){var a=/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1;a&&8>=a&&$("tbody tr:even").addClass("highlightRow");useChosen&&$("select").not(".no-chosen").chosen({disable_search_threshold:100,width:"100%"});$("input[type\x3dtext],textarea").placeholder();$("form").attr("autocomplete","off");$("input").attr("autocomplete","off");$("input[type\x3dtext],input[type\x3dsearch]").attr("autocorrect","off").attr("spellcheck","false");preventMouseWheelSpinner();
$("form").not(".allow-double").preventDoubleSubmission();a=$("div.navbar-fixed-top");a=0>=a.length?0:a.outerHeight();$("table.stickyHeaders").floatThead({enableAria:!0,top:a});$(".modal").on("shown.bs.modal",function(){$(this).find("[autofocus]").focus()});$(document).on("submit","form[data-async]",function(p){$("#saveConfigButton").prop("disabled",!0);var x=$(this),v=$(x.attr("data-messages")),y=$("#saveType").val(),u=$("#saveName").val(),l=window["benchmarkConfig"+saveIndex];"benchmark"==y&&l&&
$("#saveConfig").val(JSON.stringify(l));$.ajax({type:x.attr("method"),url:x.attr("action"),data:x.serialize(),dataType:"json",success:function(k){if(k.success){if("allocation"==y){var n="Asset allocation saved as '"+escapeHTML(u)+"'.";n+=' \x3ca href\x3d"manage-portfolios"\x3eManage saved models \x26raquo;\x3c/a\x3e\x3cbr\x3e'}else"portfolio"==y?(n="Portfolio saved as '"+escapeHTML(u)+"'.",n+=' \x3ca href\x3d"manage-portfolios"\x3eManage saved models \x26raquo;\x3c/a\x3e\x3cbr\x3e'):"timing"==y?(n=
"Timing model saved as '"+escapeHTML(u)+"'.",n+=' \x3ca href\x3d"manage-timing-models"\x3eManage saved models \x26raquo;\x3c/a\x3e\x3cbr\x3e'):"simulation"==y?(n="Simulation saved as '"+escapeHTML(u)+"'.",n+=' \x3ca href\x3d"manage-simulations"\x3eManage saved models \x26raquo;\x3c/a\x3e\x3cbr\x3e'):"optimization"==y?(n="Optimization model saved as '"+escapeHTML(u)+"'.",n+=' \x3ca href\x3d"manage-optimization-models"\x3eManage saved models \x26raquo;\x3c/a\x3e\x3cbr\x3e'):"benchmark"==y?(n="Return series saved as '"+
escapeHTML(u)+"'.",n+=' \x3ca href\x3d"manage-benchmarks"\x3eManage saved models \x26raquo;\x3c/a\x3e\x3cbr\x3e'):n="Model saved as '"+escapeHTML(u)+"'.";$("#saveConfirmMsg"+saveIndex).html(n);$("#saveConfirmBox").show();$("#saveDialog").modal("hide");"benchmark"===y?$("#benchmark option:last").after($("\x3coption\x3e",{value:u,text:u})).trigger("chosen:updated"):"timing"===y||"simulation"===y||"optimization"===y||"performance-attribution"===y?$("#savedModelList option:last").after($("\x3coption\x3e",
{value:u,text:u})).trigger("chosen:updated"):window.savedConfigurations=k.list}else $("#saveConfigButton").prop("disabled",!1),v.html('\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3e'+escapeHTML(k.message)+"\x3c/div\x3e")},error:function(k){v.html('\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3e'+escapeHTML(k.responseText||"Save Failed!")+"\x3c/div\x3e");$("#saveConfigButton").prop("disabled",!1)}});p.preventDefault()});$("#importConfigForm").on("submit",function(p){p.preventDefault();
p=$(this);var x=$(p.attr("data-messages"));if(void 0===window.FormData)x.html('\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3eOld browsers do not support HTML5 file upload. Please use a modern browser.\x3c/div\x3e');else{var v=$("#portfolio_info").val();if(null==v||0==v.length)x.html('\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3eNo file selected\x3c/div\x3e');else{v=new FormData($(this)[0]);var y="list"==$("#importType").val();$.ajax({type:"POST",url:p.attr("action"),data:v,
dataType:"json",async:!1,cache:!1,contentType:!1,processData:!1,success:function(u){if(u.success){if(y)setAssets(importListTarget,u.tickers,!0);else{var l={},k=null;if(u.allocation)l=u.allocation;else for(k=u.list,u=0;u<k.length;u++){var n=k[u];l[n.asset]=n.weight}populatePortfolio("upload",saveIndex,!1,!1,!isMultiplePortfolios(),l,savePrefix);normalizeAllocations(saveIndex,savePrefix);if(null!=k)for(l=savePrefix||"",u=0;u<k.length;u++){n=k[u];var w=u+1;void 0!==n.expectedReturn&&$("#"+l+"mean"+w).val((100*
n.expectedReturn).toFixed(2));void 0!==n.annualStdev&&$("#"+l+"volatility"+w).val((100*n.annualStdev).toFixed(2));void 0!==n.minWeight&&$("#"+l+"minWeight"+w).val((100*n.minWeight).toFixed(2));void 0!==n.maxWeight&&$("#"+l+"maxWeight"+w).val((100*n.maxWeight).toFixed(2));void 0!==n.group&&$("#"+l+"assetGroup"+w).val(n.group).trigger("chosen:updated")}}$("#portfolio_info").val("");$("#importDialog").modal("hide")}else x.html('\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3e'+escapeHTML(u.message)+
"\x3c/div\x3e")},error:function(u){x.html('\x3cdiv class\x3d"alert alert-danger" role\x3d"alert"\x3e'+escapeHTML(u.responseText||"Upload Failed!")+"\x3c/div\x3e")}})}}});$(".fmt-uppercase").blur(function(){$(this).val($(this).val().trim().toUpperCase())});$("form").on("submit",function(){$(".fmt-uppercase").each(function(){$(this).val($(this).val().trim().toUpperCase())})});$("[data-toggle\x3d'tooltip']").tooltip({container:"body",placement:"bottom"});$("#emailLink").wrap("\x3ca href\x3d\"javascript:sendEmail('admin')\"\x3e\x3c/a\x3e");
$("span.glyphicon-calendar").on("click",function(){$(this).closest("div").find("input").datepicker("show")});$(".fmt-date").datepicker({format:"mm/dd/yyyy",clearBtn:!0,autoclose:!0,showOnFocus:!1,enableOnReadonly:!1});$(document).keydown(function(p){27==p.keyCode&&$(".fmt-date").each(function(){$(this).datepicker("hide")})});useMasks&&($(".fmt-date").mask("99/99/9999"),$(".fmt-int").mask("S#",{translation:{S:{pattern:/-/,optional:!0}}}),$(".fmt-posint").mask("#"),$(".fmt-int3").mask("S999",{translation:{S:{pattern:/-/,
optional:!0}}}));initTickerAutocomplete();$("input.typeahead").typeahead({minLength:3,highlight:!1,hint:!1},{name:"tickers",limit:100,displayKey:"name",source:new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(p){return p.id},remote:{url:"symbol-lookup?query\x3d%TYPE%7C%CATEGORY%7C%QUERY",wildcard:"%QUERY",prepare:function(p,x){var v=$("#assetType").val(),y=$("#assetCategory").val()||"";x.url=x.url.replace("%TYPE",
encodeURIComponent(v)).replace("%CATEGORY",encodeURIComponent(y)).replace("%QUERY",encodeURIComponent(p));return x}},limit:100})});$("span.glyphicon-search, button.ticker-search").not("[id^\x3dsearchConfig]").on("click",function(){selectedSymbolField=$(this).closest("div.input-group").find("input");$("#assetSearch").typeahead("val","");$("#symbolPicker").modal()});$("#saveType").change(function(){$("#savedBenchmarkSymbol").closest(".form-group").toggle("benchmark"==$("#saveType").val())});$("select#fees,select#fee1,select#fee2,select#fee3").change(function(){var p=
$(this);"-1"==p.val()&&($("#confirmDialogTitle").text("Add New Fee Structure"),$("#confirmText").text("Are you sure you want to leave this page to configure a new fee structure?"),$("#confirmButton").text("Add New").addClass("btn-primary"),$("#confirmDialog").modal().on("click","#confirmButton",function(){document.location.href="manage-fees"}).on("hide.bs.modal",function(x){p.prop("selectedIndex",0).trigger("chosen:updated")}))});$("select#benchmark").change(function(){"-2"==$(this).val()&&($("#confirmDialogTitle").text("Add New Benchmark"),
$("#confirmText").text("Are you sure you want to leave this page to import a new benchmark?"),$("#confirmButton").text("Add New").addClass("btn-primary"),$("#confirmDialog").modal().on("click","#confirmButton",function(){document.location.href="manage-benchmarks"}).on("hide.bs.modal",function(p){$("select#benchmark").prop("selectedIndex",0).trigger("chosen:updated")}))});$("#assetType").change(function(){var p=$(this).val(),x=6==p,v=7==p,y=10==p;p=8==p;var u=!(x||v||y||p);$("#assetSearch").closest(".form-group").toggle(u);
$("#cashAsset").closest(".form-group").toggle(x);$("#indexAsset").closest(".form-group").toggle(v);$("#assetClassAsset").closest(".form-group").toggle(y);$("#importedAsset").closest(".form-group").toggle(p)});$("#selectTicker").on("click",function(){var p=$("#assetType").val(),x=6==p,v=7==p,y=10==p,u=8==p,l=p=null;x||v||y||u?x?(p=$("#cashAsset").val(),l="Cash"):v?(p=$("#indexAsset").val(),l=$("#indexAsset").find("option:selected").text()):y?(p=$("#assetClassAsset").val(),l=$("#assetClassAsset").find("option:selected").text()):
u&&(p=$("#importedAsset").val(),l=$("#importedAsset").find("option:selected").text()):(l=$("#assetSearch").val(),p=l.substring(l.lastIndexOf("(")+1,l.lastIndexOf(")")));p&&(selectedSymbolField.hasClass("pv-multiple")?(x=selectedSymbolField.val(),p=$.trim(x)+" "+p,selectedSymbolField.val(p).val(p)):(x=p,showFullName&&null!=l&&(x=l,1>x.indexOf("(")&&(x+=" ("+p+")")),selectedSymbolField.typeahead("val",x)));$("#symbolPicker").modal("hide")});initPortfolioControls();$("div[id^\x3d'chartDiv']").bind("contextmenu",
function(){return!1});"undefined"!==typeof Highcharts&&(Highcharts.setOptions(highchartsTheme),prepareCharts());$('a[data-toggle\x3d"tab"]').on("shown.bs.tab",function(p){p=$(p.target).attr("href");for(var x=1;x<=maxChartsPerPage;x++){var v=$("#chartDiv"+x);v.length&&v.closest(p).length&&renderChart(x)}});var d=function(){triggerCharts();$(Highcharts.charts).each(function(p,x){p=x.renderTo.style.width?x.renderTo.style.width.replace(/px/g,""):null;var v=x.renderTo.style.height?x.renderTo.style.height.replace(/px/g,
""):null,y=(x.renderTo.style.width||x.renderTo.style.minWidth).replace(/px/g,""),u=(x.renderTo.style.height||x.renderTo.style.minHeight).replace(/px/g,""),l=Math.min(y,650);y=Math.round(u*l/y);x.resetParams=[p,v,!1];x.setSize(l,y,!1)})},q=function(){$(Highcharts.charts).each(function(p,x){x.setSize.apply(x,x.resetParams)})};window.matchMedia&&(a=window.matchMedia("print"),a.addListener&&a.addListener(function(p){p.matches?d():q()}));window.onbeforeprint=d;window.onafterprint=q;applyLegacyIEFontFix();
$("input[type\x3dfile]").on("click",function(p){$(this).val("");$("#"+this.id+"_info").val("").val("")});$(document).on("change",".btn-file :file",function(){var p=$(this),x=p.val().replace(/\\/g,"/").replace(/.*\//,"");p.parents(".input-group").find(":text").val(x)});$("#verifyEmailButton").on("click",function(){$("#emailVerificationDialog").modal("hide");$.get("confirm-email?sendVerification\x3dtrue")});$("#emailVerificationDialog").modal();$("#planExpiredDialog").modal();$("#renewalAlertDialog").modal()});
var autoCompleteSet=!1;function removeTickerAutocomplete(){autoCompleteTickers&&autoCompleteSet&&$("input.fmt-ticker").not(".fmt-skipac").typeahead("destroy");autoCompleteSet=!1}
function initTickerAutocomplete(){if(autoCompleteTickers){autoCompleteSet=!0;var a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(d){return d.id},remote:{url:"symbol-lookup?query\x3d%TYPE%7C%CATEGORY%7C%QUERY",wildcard:"%QUERY",prepare:function(d,q){var p=document.activeElement?$(document.activeElement):null,x=p?p.prop("id"):null;p=x?$("#"+x+"Type"):null;x=x?$("#"+x+"Category"):null;(p=p&&1===p.length?p.val():
"")||(p="");(x=x&&1===x.length?x.val():"")||(x="");q=$.extend(!0,{},q);q.url=q.url.replace("%TYPE",encodeURIComponent(p)).replace("%CATEGORY",encodeURIComponent(x)).replace("%QUERY",encodeURIComponent(d));return q}},limit:100});$("input.fmt-ticker").not(".fmt-skipac").typeahead({minLength:3,highlight:!1,hint:!1,selectionKey:showFullName?null:"id"},{name:"tickers",limit:100,displayKey:"name",source:a});showFullName||$("input.fmt-ticker").filter(".fmt-skipac").prop("maxLength",10).mask("QTTTTTTTTT",
{translation:{Q:{pattern:/[a-zA-Z]|\^/},T:{pattern:/[a-zA-Z0-9]|\/|\.|\+|\-/}}})}else showFullName||$(".fmt-ticker").prop("maxLength",10).mask("QTTTTTTTTT",{translation:{Q:{pattern:/[a-zA-Z]|\^/},T:{pattern:/[a-zA-Z0-9]|\/|\.|\+|\-/}}});$("input.fmt-ticker").blur(function(){var d=$(this),q=d.hasClass("fmt-skipac"),p=autoCompleteTickers&&!q?d.typeahead("val").trim():d.val().trim();showFullName&&!q?(q=p.substring(p.lastIndexOf("(")+1,p.lastIndexOf(")")),0<p.length&&(null==q||0>=q.length)&&$.get("symbol-lookup",
{query:p+"|"+p+"|"+p},function(x){autoCompleteTickers?d.typeahead("val",x.name):d.val(x.name)})):autoCompleteTickers&&!q?d.typeahead("val",p.toUpperCase()):d.val(p.toUpperCase())})}function prepareCharts(){for(var a=0<$('a[data-toggle\x3d"tab"]').length,d=1;d<=maxChartsPerPage;d++){var q=$("#chartDiv"+d);if(q.length){var p=!0;a&&(p=0<q.closest("div.tab-pane.active").length);p&&renderChart(d)}}}
function loadStyleSheet(a){if(document.createStyleSheet)try{document.createStyleSheet(a)}catch(d){}else $('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+a+'"\x3e').appendTo("head")}function applyLegacyIEFontFix(){if(document.all&&!document.addEventListener){var a=document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css";d.styleSheet.cssText=":before,:after{content:none !important;}";a.appendChild(d);setTimeout(function(){a.removeChild(d)},0)}}
function triggerCharts(){if(0<$('a[data-toggle\x3d"tab"]').length){for(var a=$("div.tab-pane.active").attr("id"),d=1;d<=maxChartsPerPage;d++){var q=$("#chartDiv"+d);q.length&&!q.data("data-rendered")&&(q=q.closest("div.tab-pane"),0<q.length&&(q=q.attr("id"),$('.nav-tabs a[href\x3d"#'+q+'"]').tab("show"),renderChart(d)))}$('.nav-tabs a[href\x3d"#'+a+'"]').tab("show")}}
function renderChart(a){var d=$("#chartDiv"+a);if(d.length&&!d.data("data-rendered")){var q="getChartData"+a;try{if(window[q]){var p=window[q](),x=p[0],v=p[1],y=p[2];d.data("chartObj",x);d.data("chartData",v);d.data("chartOptions",y);var u=$("#chartControls"+a),l=u?parseInt(u.attr("data-series-count")):0;if("undefined"!==typeof Highcharts)Highcharts.chart(d.attr("id"),x),l&&updateChart(a,!0);else if(l){var k=new google.visualization.DataView(v);for(a=l+1;a<=2*l;a++)k.hideColumns([a]);x.draw(k,y)}else x.draw(v,
y)}}catch(n){console.error("Failed to render chart: "+n),d.text("Failed to render chart").css("border","1px solid red"),window.jsErrors[window.jsErrors.length]="Failed to render chart: "+n}finally{d.data("data-rendered",!0)}}}
function updateChart(a,d){var q="getChartData"+a,p=null,x=null,v=null;try{var y=$("#logScale").is(":checked"),u=$("#realScale").is(":checked"),l=$("#chartControls"+a),k=parseInt(l.attr("data-series-count"));if(window[q]){var n=$("#chartDiv"+a);p=n.data("chartObj");x=n.data("chartData");v=n.data("chartOptions");var w=n.highcharts?n.highcharts().options.title.text:v.title;w&&(u&&0>w.indexOf(" (inflation adjusted)")?w+=" (inflation adjusted)":!u&&0<w.indexOf(" (inflation adjusted)")&&(w=w.replace(" (inflation adjusted)",
"")));if(n.highcharts){var e=n.highcharts();e.yAxis[0].update({type:y?"logarithmic":"linear"});e.setTitle({text:w},!1);for(var h=0;h<2*k;h++){var g=e.series[h];p=h<k;u&&(p=!p);g.update({visible:p,showInLegend:p,color:h<k?e.series[h].color:e.series[h-k].color},!1)}e.redraw(!d)}else{v.logScale=y;var f=new google.visualization.DataView(x);d=u?1:k+1;for(h=0;h<k;h++)f.hideColumns([d]),d++;v.title=w;p.draw(f,v)}}}catch(b){console.error("Failed to render charts: "+b),$("#chartDiv"+a).text("Failed to update chart").css("border",
"1px solid red"),window.jsErrors[window.jsErrors.length]="Failed to update chart: "+b}}
var growthPortfolio={TotalStockMarket:52,IntlStockMarket:28,TotalBond:16,GlobalBond:4},moderatePortfolio={TotalStockMarket:39,IntlStockMarket:21,TotalBond:32,GlobalBond:8},conservativePortfolio={TotalStockMarket:26,IntlStockMarket:14,TotalBond:48,GlobalBond:12},incomePortfolio={TotalStockMarket:13,IntlStockMarket:7,TotalBond:64,GlobalBond:16},stockBond6040={TotalStockMarket:60,TotalBond:40},stockBond4060={TotalStockMarket:40,TotalBond:60},bhThreeFund={TotalStockMarket:50,IntlStockMarket:30,TotalBond:20},
bhFourFund={TotalStockMarket:50,IntlStockMarket:30,TotalBond:10,TIPS:10},rayDalio={TotalStockMarket:30,LongTreasury:40,IntermediateTreasury:15,Commodities:7.5,Gold:7.5},rickFerri={TotalStockMarket:48,REIT:8,IntlStockMarket:24,TotalBond:20},billSchultheis={LargeCapValue:10,LargeCapBlend:10,SmallCapValue:10,SmallCapBlend:10,REIT:10,IntlStockMarket:10,TotalBond:40},davidSwensenYale={TotalStockMarket:30,REIT:20,IntlDeveloped:15,EmergingMarket:5,LongTreasury:15,TIPS:15},scottBurns={TotalStockMarket:50,
TIPS:50},harryBrowne={TotalStockMarket:25,LongTreasury:25,TreasuryBills:25,Gold:25},billBernstein={LargeCapBlend:25,SmallCapBlend:25,IntlStockMarket:25,TotalBond:25},fundAdvice={LargeCapBlend:6,LargeCapValue:6,SmallCapBlend:6,SmallCapValue:6,REIT:6,IntlDeveloped:6,EmergingMarket:6,IntlValue:6,IntermediateTreasury:20,TIPS:8,ShortTreasury:12,IntlSmall:12},davidSwensenLazy={TotalStockMarket:30,REIT:20,IntlDeveloped:15,EmergingMarket:5,TIPS:15,ShortTreasury:15},larrySwedroeSimple={LargeCapValue:15,SmallCapValue:15,
SmallCapBlend:13,EmergingMarket:4,IntlValue:13,TIPS:40},larrySwedroeFatTails={SmallCapValue:15,EmergingMarket:15,TIPS:35,ShortTreasury:35},ivyPortfolio={TotalStockMarket:20,IntlStockMarket:20,TotalBond:20,REIT:20,Commodities:20},growthPortfolioAssets={VTSMX:52,VGTSX:28,VBMFX:16,PIGLX:4},moderatePortfolioAssets={VTSMX:39,VGTSX:21,VBMFX:32,PIGLX:8},conservativePortfolioAssets={VTSMX:26,VGTSX:14,VBMFX:48,PIGLX:12},incomePortfolioAssets={VTSMX:13,VGTSX:7,VBMFX:64,PIGLX:16},stockBond6040Assets={VTSMX:60,
VBMFX:40},stockBond4060Assets={VTSMX:40,VBMFX:60},bhThreeFundAssets={VTSMX:50,VGTSX:30,VBMFX:20},bhFourFundAssets={VTSMX:50,VGTSX:30,VBMFX:10,VIPSX:10},rayDalioAssets={VTI:30,TLT:40,IEF:15,DBC:7.5,GLD:7.5},rickFerriAssets={VTSMX:48,VGSIX:8,VGTSX:24,VBMFX:20},billSchultheisAssets={VIVAX:10,VFINX:10,VISVX:10,NAESX:10,VGSIX:10,VGTSX:10,VBMFX:40},davidSwensenYaleAssets={VTSMX:30,VGSIX:20,VTMGX:15,VEIEX:5,TLT:15,VIPSX:15},scottBurnsAssets={VTSMX:50,VIPSX:50},harryBrowneAssets={VTI:25,TLT:25,CASHX:25,GLD:25},
billBernsteinAssets={VFINX:25,NAESX:25,VGTSX:25,VBMFX:25},fundAdviceAssets={VFINX:6,VIVAX:6,NAESX:6,VISVX:6,VGSIX:6,VTMGX:12,VEIEX:6,EFV:12,VFITX:20,VFISX:12,VIPSX:8},davidSwensenLazyAssets={VTSMX:30,VGSIX:20,VTMGX:15,VEIEX:5,VIPSX:15,VFISX:15},larrySwedroeSimpleAssets={VIVAX:15,IJS:15,NAESX:13,VEIEX:4,EFV:13,VIPSX:40},larrySwedroeFatTailsAssets={IJS:15,VWO:15,TIP:35,SHY:35},ivyPortfolioAssets={VTI:20,VEU:20,IEF:20,VNQ:20,GSG:20},lazyPortfolios={"Growth Portfolio":growthPortfolio,"Moderate Portfolio":moderatePortfolio,
"Conservative Portfolio":conservativePortfolio,"Income Portfolio":incomePortfolio,"Stocks/Bonds (60/40)":stockBond6040,"Stocks/Bonds (40/60)":stockBond4060,"Bogleheads Three Funds":bhThreeFund,"Bogleheads Four Funds":bhFourFund,"Ray Dalio All Seasons":rayDalio,"Rick Ferri Core Four":rickFerri,"Bill Bernstein No Brainer":billBernstein,"Bill Schultheis Coffee House":billSchultheis,"FundAdvice Ultimate Buy \x26 Hold Portfolio":fundAdvice,"David Swensen Lazy Portfolio":davidSwensenLazy,"David Swensen Yale Endowment":davidSwensenYale,
"Scott Burns Couch Portfolio":scottBurns,"Harry Browne Permanent Portfolio":harryBrowne,"Larry Swedroe Simple Portfolio":larrySwedroeSimple,"Larry Swedroe Minimize FatTails Portfolio":larrySwedroeFatTails,"Mebane Faber Ivy Portfolio":ivyPortfolio},lazyPortfolioAssets={"Growth Portfolio":growthPortfolioAssets,"Moderate Portfolio":moderatePortfolioAssets,"Conservative Portfolio":conservativePortfolioAssets,"Income Portfolio":incomePortfolioAssets,"Stocks/Bonds (60/40)":stockBond6040Assets,"Stocks/Bonds (40/60)":stockBond4060Assets,
"Bogleheads Three Funds":bhThreeFundAssets,"Bogleheads Four Funds":bhFourFundAssets,"Ray Dalio All Seasons":rayDalioAssets,"Rick Ferri Core Four":rickFerriAssets,"Bill Bernstein No Brainer":billBernsteinAssets,"Bill Schultheis Coffee House":billSchultheisAssets,"FundAdvice Ultimate Buy \x26 Hold Portfolio":fundAdviceAssets,"David Swensen Lazy Portfolio":davidSwensenLazyAssets,"David Swensen Yale Endowment":davidSwensenYaleAssets,"Scott Burns Couch Portfolio":scottBurnsAssets,"Harry Browne Permanent Portfolio":harryBrowneAssets,
"Larry Swedroe Simple Portfolio":larrySwedroeSimpleAssets,"Larry Swedroe Minimize FatTails Portfolio":larrySwedroeFatTailsAssets,"Mebane Faber Ivy Portfolio":ivyPortfolioAssets};function selectPortfolio(a){var d=$(a).val(),q=a.id.substring(9),p="input[id$\x3d'"+q+"']";if(0==a.selectedIndex)$(p).removeAttr("readonly");else{$(p).attr("readonly","readonly").val("");if(a=lazyPortfolios[d])for(var x in a)a.hasOwnProperty(x)&&$("#"+x+q).val(a[x]);else populatePortfolioAllocation(q,d);processTotal(q)}}
function selectAssets(a,d){var q=lazyPortfolioAssets[d];q||(q=window.savedConfigurations,q=null==q?null:q[d]);a=$(a);q&&a&&setAssets(a,q,!1)}function setAssets(a,d,q){var p="";if(q)for(var x=0;x<d.length;x++)p+=" "+d[x];else for(x in d)d.hasOwnProperty(x)&&(showFullName&&0<x.indexOf("(")&&x.indexOf(")")>x.indexOf("(")?(q=x.substring(x.lastIndexOf("(")+1,x.lastIndexOf(")")),p+=" "+q):p+=" "+x);p=p.substring(1);a.val(p).val(p)}
function sendEmail(a,d){d||(d="portfoliovisualizer.com");location.href="mailto:"+a+"@"+d}function writeEmailLink(a,d,q){q||(q="portfoliovisualizer.com");document.write("\x3ca href\x3d\"javascript:sendEmail('"+d+"', '"+q+"')\"\x3e");document.write(a);document.write("\x3c/a\x3e")}function openPopupURL(a){a=window.open(a);null==a.opener&&(a.opener=self);a.focus();return a}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}
jQuery.fn.preventDoubleSubmission=function(){$(this).on("submit",function(a){var d=$(this);!0===d.data("submitted")?a.preventDefault():d.data("submitted",!0)});return this};
function addFieldError(a,d){var q=$("#"+a);if(0==q.length)console.error("Field "+a+" not found for error message: "+d);else{var p=q.closest(".form-group");p.addClass("has-error");var x=p.find("label.control-label").attr("class").split(" ");p=-1;for(var v=0;v<x.length;v++){var y=/^col\-sm\-(.+)/.exec(x[v]);if(null!=y){p=y[1]-0;break}}0>=p?console.log("Error: Failed to determine grid width of the label for field: "+a):(q=q.closest("div:not(.input-group)"),q.wrap("\x3cdiv class\x3d'col-sm-"+(12-p)+"'\x3e\x3c/div\x3e"),
q.wrap("\x3cdiv class\x3d'row'\x3e\x3c/div\x3e"),$("#"+a+"_chosen").find("span").addClass("error-text"),q.parent().parent().append('\x3cdiv class\x3d"row"\x3e\x3cspan class\x3d"help-block col-sm-12"\x3e'+d+"\x3c/span\x3e\x3c/div\x3e"))}}function importPortfolio(a,d){saveIndex=a;savePrefix=d;$("#importType").val("portfolio");$("#importPortfolioInfo").show();$("#importListInfo").hide();$("#importMessages").empty();$("#importDialogTitle").text("Import Portfolio");$("#importDialog").modal()}
function importList(a){importListTarget=$(a);$("#importType").val("list");$("#importPortfolioInfo").hide();$("#importListInfo").show();$("#importMessages").empty();$("#importDialogTitle").text("Import Ticker List");$("#importDialog").modal()}
function saveDialog(a,d,q,p,x){saveIndex=a;$("#saveDialogTitle").text("Save "+d);a=window["benchmarkConfig"+a];a=!("allocation"!=q&&"portfolio"!=q&&"timing"!=q||!a);$("#saveType")[0].selectedIndex=0;$("#saveType option:first").val(q).text(d).trigger("chosen:updated");$("#saveType").closest(".form-group").toggle(a);$("#savedBenchmarkSymbol").val("").closest(".form-group").toggle("benchmark"==$("#saveType").val());$("#saveSelection").val(p);$("#saveConfig").val(JSON.stringify(x));$("#saveName").prop("readonly",
!1).attr("placeholder","").val("");$("#saveMessages").empty();$("#saveConfigButton").prop("disabled",!1);$("#saveDialog").modal()}var indexToPopulate=-1,populateAssetClasses=!1,clearExistingAssets=!1;
function populatePortfolioAllocation(a,d){var q=window.savedConfigurations;if(q=null==q?null:q[d]){$("input[id$\x3d'"+a+"']").attr("readonly","readonly").val("");q=getRoundedWeights(q,!1);for(var p in q)if(q.hasOwnProperty(p)){var x=q[p];x=0===x%1?x:x.toFixed(2);$("#"+p+a).val(x)}$("#portfolioName"+a).val(d);$("#portfolio"+a).val(d).trigger("chosen:updated")}}
function populatePortfolio(a,d,q,p,x,v,y){var u=d||indexToPopulate,l=populateAssetClasses||q,k=window.savedConfigurations;y=y||"";v||(v=null==k?null:k[a],p&&(v=q?lazyPortfolios[a]:lazyPortfolioAssets[a]));if(v){q=allowExtraRows(y);k="input[id$\x3d'"+u+"']";$("input[id^\x3d'"+y+"allocation']").filter(k).val("").removeAttr("readonly");$("#portfolioName"+d).val(a);$("#portfolio"+u).val("Custom").trigger("chosen:updated");if(clearExistingAssets||x)l?$("select[id^\x3d'"+y+"asset']").filter(function(){return this.id.match(/\d+$/)}).prop("selectedIndex",
0).trigger("chosen:updated"):$("input[id^\x3d'"+y+"symbol']").filter(function(){return this.id.match(/\d+$/)}).typeahead("val",""),$("input[id^\x3d'"+y+"allocation']").filter(function(){return this.id.match(/\d+$/)}).val("");a=getRoundedWeights(v,p);removeTickerAutocomplete();for(var n in a)if(a.hasOwnProperty(n)){d=p=a[n];0===p%1?d=p:(d=p.toFixed(2),d.endsWith(".00")&&(d=d.slice(0,-3)));p=0;x=!0;v=l?50:150;for(k=1;k<=v;k++){var w=l?$("#"+y+"asset"+k):$("#"+y+"symbol"+k);if(0>=w.length){1>p&&q&&(addAssetRows(1,
null,y,!1),p=k);break}w=w.val();if(w==n){p=k;x=!1;break}else!w&&1>p&&(p=k)}p&&(x&&(l?$("#"+y+"asset"+p).val(n).trigger("chosen:updated"):$("#"+y+"symbol"+p).val(n)),$("#"+y+"allocation"+p+"_"+u).val(d))}initTickerAutocomplete();preventMouseWheelSpinner();processTotal(u,y)}}
function getRoundedWeights(a,d){var q=0,p=0,x=0,v=null,y=0,u=null,l={},k={},n;for(n in a)if(a.hasOwnProperty(n)){var w=d?a[n]:100*a[n],e=Number(w.toFixed(2));q+=w;p+=e;l[n]=w;k[n]=e;w=e-w;if(null==v||w<x)x=w,v=n;if(null==u||w>y)y=w,u=n}if(1E-10>Math.abs(q)||1E-10>Math.abs(p))return l;if("100.00"===p.toFixed(2)||"-100.00"===p.toFixed(2))return k;a=0>q;p=(a?-100:100)-p;v=0<=p?a?u:v:a?v:u;k[v]=Number((k[v]+p).toFixed(2));return k}
function showLoginPrompt(a){expiredAccount?($("#confirmDialogTitle").text("Inactive Account"),$("#confirmText").text("Your trial or subscription plan has expired. Please select and activate a subscription plan to "+(a?"save":"download")+" results."),$("#confirmButton").text("Select Plan").addClass("btn-primary"),$("#confirmDialog").modal().on("click","#confirmButton",function(){document.location.href="pricing"})):($("#confirmDialogTitle").text("Login Required"),$("#confirmText").text("Please login first to "+
(a?"save":"download")+" results."),$("#confirmButton").text("Login").addClass("btn-primary"),$("#confirmDialog").modal().on("click","#confirmButton",function(){var d=$("span.directLink").find("a").attr("href");document.location.href="login"+(d?"?loginTarget\x3d"+encodeURIComponent(d):"")}))}function clearAllocations(a,d){$("input[id^\x3d'"+(d?d+"allocation":"allocation")+"']").each(function(){$(this).attr("id").endsWith(""+a)&&$(this).val("")});processTotal(a,d)}
function equalWeightAllocations(a,d){var q=getPortfolioSection(d);d=d||"";clearAllocations(a,d);var p=isAssetClasses()?q.find("div.asset-row select[id^\x3d'"+d+"asset']"):q.find("div.asset-row input[id^\x3d'"+d+"symbol']");p=p.filter(function(){return $(this).val().trim()});var x=p.length;if(!(0>=x)){var v=Math.floor(100/x*100)/100;q=100;for(var y=1;y<x;y++){var u=p[y].id.match(/\d+/);$("#"+d+"allocation"+u+"_"+a).val(v);q-=v}p=p[0].id.match(/\d+/);$("#"+d+"allocation"+p+"_"+a).val(0===q%1?q:q.toFixed(2));
processTotal(a,d)}}
function normalizeAllocations(a,d){d=getPortfolioSection(d);var q=d.find("div.asset-row").length;d=d.attr("data-prefix")||"";var p=-1,x=0,v;for(v=1;v<=q;v++){var y="#"+d+"allocation"+v+"_"+a;var u=$(y).val();$.isNumeric(u)&&(u=Number(u),x+=u,0>p&&(p=v))}if(!(0>=x)){var l=100;for(v=1;v<=q;v++)v!=p&&(y="#"+d+"allocation"+v+"_"+a,u=$(y).val(),$.isNumeric(u)&&(u=Number(u),u=Math.floor(u/x*1E4+1E-11)/100,$(y).val(u),l-=u));$("#"+d+"allocation"+p+"_"+a).val(0===l%1?l:l.toFixed(2));processTotal(a,d)}}
function copyAllocations(a,d,q){q=getPortfolioSection(q);var p=q.find("div.asset-row").length;q=q.attr("data-prefix")||"";for(var x=1;x<=p;x++){var v="#"+q+"allocation"+x+"_"+a;$("#"+q+"allocation"+x+"_"+d).val($(v).val())}processTotal(d,q)}function isAssetClasses(a){return getPortfolioSection(a).hasClass("pv-asset-classes")}function isMultiplePortfolios(a){return getPortfolioSection(a).hasClass("pv-multiple")}
function allowExtraRows(a){return getPortfolioSection(a).hasClass("pv-allow-expansion")}function addAssetRows(a,d,q,p){d=d||getPortfolioSection(q);q=d.attr("data-maxrows")||150;d.find(".add-rows").remove();var x=d.find("div.asset-row").length,v=d.find("div.asset-row:last");p&&removeTickerAutocomplete();x=addRowsInner(v,a,x,q);x<q&&d.find("div.asset-row:last div:first").append(addAssetRowsLinkHTML);p&&(initTickerAutocomplete(),preventMouseWheelSpinner());return!1}
function addRowsInner(a,d,q,p,x){for(var v=0;v<d;v++){var y=a.clone(!0,!0),u=parseInt(y.find("input[id!\x3d''][id]:first").prop("id").match(/\d+/)),l=u+1;y.find("input").each(function(){var w=$(this),e=w.prop("id"),h=w.prop("name");w.prop("id",e.replace(u,l)).prop("name",h.replace(u,l));w.is(":checkbox")?w.prop("checked",!1):w.val("")});y.find("label").each(function(){var w=$(this),e=w.prop("for");e&&w.prop("for",e.replace(u,l));w.text(w.text().replace(u,l))});y.find("select").each(function(){var w=
$(this),e=w.prop("id"),h=w.prop("name");useChosen&&(w.data("chosen",null).data("data-placeholder",null).css("display","block"),w.next().remove());w.prop("id",e.replace(u,l)).prop("name",h.replace(u,l)).prop("selectedIndex",0);useChosen&&w.chosen({disable_search_threshold:100,width:"100%"})});var k=y.find("div:first");if(0>=k.find(":input").length){var n=k.html();0<=n.indexOf(u)&&k.html(n.replace(u,l))}y.toggleClass("highlightRow",1==l%2);x&&x(y,l);a.after(y);a=y;if(++q>=p)break}return q}
function clearPortfolios(a){a=a||getPortfolioSection();var d=a.attr("data-count")||3,q=a.attr("data-prefix")||"";"true"!==a.attr("data-advanced")&&(a.find(".add-rows").remove(),trimExtraAssetRows(a),a.find("div.asset-row:last div:first").append(addAssetRowsLinkHTML));a.find("input").each(function(){var p=$(this);p.is(":checkbox")?p.prop("checked",!1):p.hasClass("fmt-ticker")?p.typeahead("val",""):p.val("")});a.find("select").prop("selectedIndex",0).trigger("chosen:updated");for(a=1;a<=d;a++)processTotal(a,
q);$("input[id^\x3d'portfolioName']").val("")}function trimExtraAssetRows(a,d){for(d=d||10;;){var q=a.find("div.asset-row:last");if(parseInt(q.find("input.asset-weight:first").prop("id").match(/\d+/))<=d)break;q.remove()}}
function processTotal(a,d){d=d||"";var q=getPortfolioSection(d),p=q.hasClass("pv-allow-short"),x=d+"total"+a;d=$("#"+x);var v=0,y=0;q.find("input.asset-weight").each(function(){var u=this.id.substring(this.id.length-1);this.id!=x&&u==a&&(u=Number($(this).val()),v+=u,0<u&&(y+=u))});d.val(0===v%1?v:v.toFixed(2));if(q="100.00"===v.toFixed(2)||p&&("-100.00"===v.toFixed(2)||0===v&&0<y))for(p=3;6>=p;p++)if("0"!==v.toFixed(p).slice(-1)){d.val(v.toFixed(p));q=!1;break}q?d.css("background-color","#dff0d8"):
0!==v?d.css("background-color","#f2dede"):d.css("background-color","#eeeeee")}
function initPortfolioControls(){var a=$(window).width();380<a&&768>=a&&$(".allocation-menu").addClass("btn-group-xs").removeClass("btn-group-sm");$(".portfolio-section").each(function(){for(var d=$(this),q=d.attr("data-prefix")||"",p=d.attr("data-count")||3,x=d.attr("data-maxrows")||150,v="true"===d.attr("data-advanced"),y=1;y<=p;y++)processTotal(y,q);d.find("div.asset-row").length<x&&!v&&(d.find(".add-rows").remove(),d.find("div.asset-row:last div:first").append(addAssetRowsLinkHTML))});$("input.asset-weight").on("change",
function(){var d=this.id.match(/\d+$/),q=getParentPortfolio(this).attr("data-prefix")||"";processTotal(d,q)});$(".allocation-menu").on("show.bs.dropdown",function(){var d=$(this),q=getParentPortfolio(d).attr("data-prefix")||"",p=d.prop("id").match(/\d+$/),x=window.savedConfigurations,v=!isMultiplePortfolios();d=d.find("li.saved-items");if(x&&d.length){var y=!1,u;for(u in x)if(x.hasOwnProperty(u)){y||(d.siblings("li.saved-item").remove(),y=!0);var l='\x3cli class\x3d"saved-item"\x3e\x3ca href\x3d"#"\x3e'+
escapeHTML(u)+"\x3c/a\x3e\x3c/li\x3e";l=$($.parseHTML(l));l.find("a").on("click",function(k){var n=$(this).text();populatePortfolio(n,p,isAssetClasses(),!1,v,null,q);k.preventDefault()});d.after(l);d=l}}});$(".clearAllocation").on("click",function(){clearPortfolios(getParentPortfolio(this))});$("#resetGroups").on("click",function(){$("#groupConstraintsSection").find("input").each(function(){$(this).val("")})})}
function getParentPortfolio(a){if(!a)return getPortfolioSection();a instanceof jQuery||(a=$(a));return a.closest("div.portfolio-section")}function getPortfolioSection(a){a=a||"";var d=$("div.portfolio-section");if(1<d.length)for(var q=0;q<d.length;q++){var p=$(d[q]),x=p.attr("data-prefix")||"";if(a==x)return p}return d?d.first():null}
function renumberCashflows(a){$("div.cashflow").each(function(d){var q=$(this);1==d%2?q.addClass("highlight-cashflow"):q.removeClass("highlight-cashflow");if(!a){q=q.find("div.control-label:first");var p=q.text();q.text(p.substring(0,p.indexOf("#")+1)+(d+1))}})}function removeCashflow(a){$("#cfname"+a).closest(".cashflow").remove();renumberCashflows()}
function resetCashflow(a){$("#cfname"+a).val("").val("");$("#cfamount"+a).val("").val("");$("#cfpercentage"+a).val("").val("");$("#cftimes"+a).val("").val("");$("#cfstartyear"+a).val("").val("");$("#cfinfadj"+a).prop("checked",!0);$("#cfpctchange"+a).val("").val("");$("#cfrollperiods"+a).val("").val("");$("#cfsmoothingrate"+a).val("").val("");$("#cftype"+a).val("2").trigger("change").trigger("chosen:updated");$("#cffrequency"+a).val("4").trigger("change").trigger("chosen:updated");$("#cfoccurs"+a).val("3").trigger("change").trigger("chosen:updated");
$("#cfstart"+a).val("3").trigger("change").trigger("chosen:updated")}function setDynamicRowControlIndex(a,d,q){a.find("input").each(function(){var p=$(this),x=p.prop("id"),v=p.prop("name");p.prop("id",x.replace(d,q)).prop("name",v.replace(d,q))});a.find("label").each(function(){var p=$(this),x=p.prop("for");x&&p.prop("for",x.replace(d,q))});a.find("select").each(function(){var p=$(this),x=p.prop("id"),v=p.prop("name");p.prop("id",x.replace(d,q)).prop("name",v.replace(d,q))})}
function addCashflow(){var a=$("div.cashflow").length,d=$("div.cashflows"),q=d.attr("data-maxrows")||50;if(!(a>q)){a=d.find("div.cashflow:last");d=a.clone(!0,!0);q=parseInt(d.find("input[id!\x3d''][id]:first").prop("id").match(/\d+/));var p=q+1;useChosen&&d.find("select").each(function(){var x=$(this);x.data("chosen",null).data("data-placeholder",null).css("display","block");x.next().remove()});setDynamicRowControlIndex(d,q,p);useChosen&&d.find("select").each(function(){$(this).chosen({disable_search_threshold:100,
width:"100%"})});a.after(d);resetCashflow(p);renumberCashflows()}}
function initCashflows(){$("select[id^\x3d'cftype']").on("change",function(){var a=this.id.match(/\d+$/),d=$(this).val(),q=8==d||9==d,p=3>d||q,x=5==d;d=6==d;var v=$("#cfamount"+a),y=$("#cfpercentage"+a),u=$("#cfinfadj"+a),l=$("#cfpctchange"+a),k=$("#cfrollperiods"+a);a=$("#cfsmoothingrate"+a);p?(y.closest(".input-group").hide(),k.closest(".input-group").hide(),a.closest(".input-group").hide(),l.closest(".input-group").hide(),v.closest(".input-group").show(),u.closest("div").toggle(!q),l.closest(".input-group").toggle(q)):
(v.closest(".input-group").hide(),u.closest("div").hide(),l.closest(".input-group").hide(),y.closest(".input-group").show(),k.closest(".input-group").toggle(x),a.closest(".input-group").toggle(d))});$("select[id^\x3d'cfstart']").on("change",function(){var a=this.id.match(/\d+$/),d=2<$(this).val();$("#cfstartyear"+a).closest(".input-group").toggle(d)});$("select[id^\x3d'cfoccurs']").on("change",function(){var a=this.id.match(/\d+$/),d=2<$(this).val();$("#cftimes"+a).closest(".input-group").toggle(d)});
$("button.remove-cashflow").on("click",function(){var a=$("div.cashflow").length;$("div.cashflows");var d=$(this).closest("div.cashflow-row").find("input").attr("id").match(/\d+$/);1<a?(removeCashflow(d),$("div.cashflow").each(function(q){q>=d-1&&setDynamicRowControlIndex($(this),q+2,q+1)})):resetCashflow(d)});$("button.add-cashflow").on("click",function(){addCashflow()});$("select[id^\x3d'cftype']").trigger("change");$("select[id^\x3d'cfstart']").trigger("change");$("select[id^\x3d'cfoccurs']").trigger("change");
renumberCashflows(!0)}
function addMarketExpectation(){removeTickerAutocomplete();var a=$("div.expectation").length,d=$("div.expectations"),q=d.attr("data-maxrows")||50;if(a>=q)alert("Maximum number of asset expectations is "+q);else{a=d.find("div.expectation:last");q=a.find("select:first").val();d=a.clone(!0,!0);d.find("select:first").val(q);q=parseInt(d.find("input[id!\x3d''][id]:first").prop("id").match(/\d+/));var p=q+1;useChosen&&d.find("select").each(function(){var x=$(this);x.data("chosen",null).data("data-placeholder",
null).css("display","block");x.next().remove()});setDynamicRowControlIndex(d,q,p);useChosen&&d.find("select").each(function(){$(this).chosen({disable_search_threshold:100,width:"100%"})});d.find("div.control-label:first").text(p);d.find("select[id^\x3d'fatype']").trigger("change");a.hasClass("highlightRow")?d.removeClass("highlightRow"):d.addClass("highlightRow");d.find("input[type\x3dtext]").each(function(){$(this).val("")});a.after(d);initTickerAutocomplete();preventMouseWheelSpinner()}}
function initMarketExpectations(){$(".expectations").find("select[id^\x3d'fatype']").change(function(){var a=$(this),d=a.prop("id");a=1==a.val();d=d.match(/\d+/g);a?($("#faticker"+d).closest("div[class^\x3d'col']").hide(),$("#faac"+d).closest("div[class^\x3d'col']").show()):($("#faac"+d).closest("div[class^\x3d'col']").hide(),$("#faticker"+d).closest("div[class^\x3d'col']").show())});$("select[id^\x3d'fatype']").trigger("change");$("button.add-expectation").on("click",function(){addMarketExpectation()})}
function addBackfill(){removeTickerAutocomplete();var a=$("div.backfill").length,d=$("div.backfills"),q=d.attr("data-maxrows")||50;if(a>=q)alert("Maximum number of asset backfills is "+q);else{a=d.find("div.backfill:last");q=a.find("select:first").val();d=a.clone(!0,!0);d.find("select:first").val(q);q=parseInt(d.find("input[id!\x3d''][id]:first").prop("id").match(/\d+/));var p=q+1;useChosen&&d.find("select").each(function(){var x=$(this);x.data("chosen",null).data("data-placeholder",null).css("display",
"block");x.next().remove()});setDynamicRowControlIndex(d,q,p);useChosen&&d.find("select").each(function(){$(this).chosen({disable_search_threshold:100,width:"100%"})});d.find("div.control-label:first").text(p);d.find("select[id^\x3d'fatype']").trigger("change");a.hasClass("highlightRow")?d.removeClass("highlightRow"):d.addClass("highlightRow");d.find("input[type\x3dtext]").each(function(){$(this).val("")});a.after(d);initTickerAutocomplete();preventMouseWheelSpinner()}}
function initBackfills(){$("button.add-backfill").on("click",function(){addBackfill()})}
function fillForecast(a,d){if("undefined"!==typeof capitalMarketExpectations){d=d||"";var q=getPortfolioSection(d);q=(a=isAssetClasses())?q.find("div.asset-row select[id^\x3d'"+d+"asset']"):q.find("div.asset-row input[id^\x3d'"+d+"symbol']");q=q.filter(function(){return $(this).val().trim()});var p=q.length;if(!(0>=p))for(var x=0;x<p;x++){var v=q[x].id.match(/\d+/),y=a?$("#"+d+"asset"+v).val():$("#"+d+"symbol"+v).val(),u=$("#"+d+"mean"+v);if(!u||!y)break;for(var l=0;l<capitalMarketExpectations.length;l++){var k=
capitalMarketExpectations[l];if(k.asset==y){u.val((100*k.mean).toFixed(2));0<k.volatility&&$("#"+d+"volatility"+v).val((100*k.volatility).toFixed(2));break}}}}}
function toggleReportSections(){var a="custom"==$("#reportTemplate").val();if("undefined"!==typeof reportSections){if(!reportSectionsPopulated){for(var d="",q=0;q<reportSections.length;q++){var p=2<<q;d+='\x3cdiv\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"reportSection'+p+'" value\x3d"'+p+'" checked\x3e'+reportSections[q]+"\x3c/label\x3e\x3c/div\x3e"}$("#reportSectionsList").html(d);reportSectionsPopulated=!0}0>=reportSections.length&&(a=!1)}else a=!1;"string"===
typeof reportTitle&&$("#reportTitle").val(reportTitle).closest(".form-group").show();$("#reportSectionsList").closest(".form-group").toggle(a)}function getSelectedReportSections(){if("custom"!=$("#reportTemplate").val())return-1;var a=0;$("#reportSectionsList").find("input[type\x3dcheckbox]").each(function(){var d=$(this);d.is(":checked")&&(d=d.val(),a|=d)});return a}
function sendPostData(a,d){var q=document.createElement("form");q.setAttribute("action",a);q.setAttribute("method","post");for(var p in d)d.hasOwnProperty(p)&&(a=document.createElement("input"),a.setAttribute("type","hidden"),a.setAttribute("name",p),a.setAttribute("value",d[p]),q.appendChild(a));document.body.appendChild(q);q.submit()};